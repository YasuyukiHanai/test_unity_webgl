(function(e){function t(t){for(var o,s,r=t[0],c=t[1],h=t[2],d=0,u=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(u.length)u.shift()();return a.push.apply(a,h||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var h=0;h<r.length;h++)t(r[h]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("home")],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"threeMapDialog",attrs:{id:"container"}}),n("div",{staticClass:"view"},[n("div",{on:{click:e.reset}},[e._v("全局视角")]),e._l(e.list,(function(t,o){return n("div",{key:o,class:o===e.currentIndex?"blue":"",on:{click:function(t){return e.chooseRoom(o)}}},[e._v(e._s(t))])}))],2)])},r=[],c=n("2909"),h=n("c7eb"),l=n("1da1"),d=n("d4ec"),u=n("bee2"),m=n("ade3"),p=(n("d3b7"),n("99af"),n("b0c0"),n("a434"),n("a9e3"),n("5a89")),b=n("ef20"),w=n("22b5"),f=(n("ddb0"),n("4c53"),function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new p["Mb"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:p["R"].LEFT,MIDDLE:p["R"].MIDDLE,RIGHT:p["R"].RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),r=s.NONE},this.update=function(){var t=new p["Mb"],i=(new p["qb"]).setFromUnitVectors(e.up,new p["Mb"](0,1,0)),a=i.clone().inverse(),b=new p["Mb"],w=new p["qb"];return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(i),h.setFromVector3(t),n.autoRotate&&r===s.NONE&&L(z()),h.theta+=l.theta,h.phi+=l.phi,h.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),n.target.add(u),t.setFromSpherical(h),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),d=1,!!(m||b.distanceToSquared(n.object.position)>c||8*(1-w.dot(n.object.quaternion))>c)&&(n.dispatchEvent(o),b.copy(n.object.position),w.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",de,!1),n.domElement.removeEventListener("mousedown",oe,!1),n.domElement.removeEventListener("wheel",se,!1),n.domElement.removeEventListener("touchstart",ce,!1),n.domElement.removeEventListener("touchend",le,!1),n.domElement.removeEventListener("touchmove",he,!1),document.removeEventListener("mousemove",ie,!1),document.removeEventListener("mouseup",ae,!1),window.removeEventListener("keydown",re,!1)};var n=this,o={type:"change"},i={type:"start"},a={type:"end"},s={NONE:0,ROTATE_UP:1,ROTATE_LEFT:2,ROTATE:3,DOLLY:4,DOLLY_ROTATE:7,PAN:8,DOLLY_PAN:12},r=s.NONE,c=1e-6,h=new p["Cb"],l=new p["Cb"],d=1,u=new p["Mb"],m=!1,b=new p["Lb"],w=new p["Lb"],f=new p["Lb"],g=new p["Lb"],v=new p["Lb"],y=new p["Lb"],j=new p["Lb"],O=new p["Lb"],x=new p["Lb"],M=new p["Lb"],k=new p["Lb"],P=new p["Lb"],E=new p["Lb"],S=new p["Lb"];function z(){return 2*Math.PI/60/60*n.autoRotateSpeed}function T(){return Math.pow(.95,n.zoomSpeed)}function L(e){l.theta-=e}function R(e){l.phi-=e}var C=function(){var e=new p["Mb"];return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),u.add(e)}}(),D=function(){var e=new p["Mb"];return function(t,o){!0===n.screenSpacePanning?e.setFromMatrixColumn(o,1):(e.setFromMatrixColumn(o,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),u.add(e)}}(),A=function(){var e=new p["Mb"];return function(t,o){var i=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*s/i.clientHeight,n.object.matrix),D(2*o*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),D(o*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: MapControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function I(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function F(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function _(e){b.set(e.clientX,e.clientY)}function N(e){P.set(e.clientX,e.clientY)}function H(e){x.set(e.clientX,e.clientY)}function Y(e){f.set(e.clientX,e.clientY),v.subVectors(f,b).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;L(2*Math.PI*v.x/t.clientHeight),R(2*Math.PI*v.y/t.clientHeight),b.copy(f),n.update()}function B(e){E.set(e.clientX,e.clientY),S.subVectors(E,P),S.y>0?I(T()):S.y<0&&F(T()),P.copy(E),n.update()}function G(e){M.set(e.clientX,e.clientY),k.subVectors(M,x).multiplyScalar(n.panSpeed),A(k.x,k.y),x.copy(M),n.update()}function Z(e){}function X(e){e.deltaY<0?F(T()):e.deltaY>0&&I(T()),n.update()}function q(e){switch(e.keyCode){case n.keys.UP:A(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:A(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:A(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:A(-n.keyPanSpeed,0),n.update();break}}function U(e){b.set(e.touches[0].pageX,e.touches[0].pageY),w.set(e.touches[1].pageX,e.touches[1].pageY)}function V(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+o*o);P.set(0,i)}}function W(e){n.enablePan&&x.set(e.touches[0].pageX,e.touches[0].pageY)}function J(e){if(!1!==n.enableRotate&&0!==(r&s.ROTATE)){if(f.set(e.touches[0].pageX,e.touches[0].pageY),g.set(e.touches[1].pageX,e.touches[1].pageY),v.subVectors(f,b),y.subVectors(g,w),j.subVectors(w,b),O.subVectors(g,f),K()){var t=n.domElement===document?n.domElement.body:n.domElement;R(2*Math.PI*v.y/t.clientHeight),r=s.ROTATE_UP}else 0!==(r&s.ROTATE_LEFT)&&L((j.angle()-O.angle())*n.rotateSpeed);b.copy(f),w.copy(g)}}function K(){return!!Q(j)&&(!!Q(O)&&(!!$(v)&&(!!$(y)&&v.dot(y)>0)))}var Q=function(){var e=Math.sin(Math.PI/6);return function(t){return Math.abs(Math.sin(t.angle()))<e}}(),$=function(){var e=Math.cos(Math.PI/2-Math.PI/6);return function(t){return Math.abs(Math.cos(t.angle()))<e}}();function ee(e){if(!1!==n.enableZoom&&0!==(r&s.DOLLY)){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+o*o);E.set(0,i),S.set(0,Math.pow(E.y/P.y,n.zoomSpeed)),I(S.y),P.copy(E)}}function te(e){!1!==n.enablePan&&0!==(r&s.PAN)&&(M.set(e.touches[0].pageX,e.touches[0].pageY),k.subVectors(M,x).multiplyScalar(n.panSpeed),A(k.x,k.y),x.copy(M))}function ne(e){}function oe(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;_(e),r=s.ROTATE}else{if(!1===n.enablePan)return;H(e),r=s.PAN}break;case n.mouseButtons.MIDDLE:if(!1===n.enableZoom)return;N(e),r=s.DOLLY;break;case n.mouseButtons.RIGHT:if(!1===n.enableRotate)return;_(e),r=s.ROTATE;break}r!==s.NONE&&(document.addEventListener("mousemove",ie,!1),document.addEventListener("mouseup",ae,!1),n.dispatchEvent(i))}}function ie(e){if(!1!==n.enabled)switch(e.preventDefault(),r){case s.ROTATE:if(!1===n.enableRotate)return;Y(e);break;case s.DOLLY:if(!1===n.enableZoom)return;B(e);break;case s.PAN:if(!1===n.enablePan)return;G(e);break}}function ae(e){!1!==n.enabled&&(Z(e),document.removeEventListener("mousemove",ie,!1),document.removeEventListener("mouseup",ae,!1),n.dispatchEvent(a),r=s.NONE)}function se(e){!1===n.enabled||!1===n.enableZoom||r!==s.NONE&&r!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),X(e),n.dispatchEvent(a))}function re(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&q(e)}function ce(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enablePan)return;W(e),r=s.PAN;break;case 2:if(!1===n.enableZoom&&!1===n.enableRotate)return;U(e),V(e),r=s.DOLLY_ROTATE;break;default:r=s.NONE}r!==s.NONE&&n.dispatchEvent(i)}}function he(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enablePan)return;if(r!==s.PAN)return;te(e),n.update();break;case 2:if(!1===n.enableZoom&&!1===n.enableRotate)return;if(0===(r&s.DOLLY_ROTATE))return;J(e),ee(e),n.update();break;default:r=s.NONE}}function le(e){!1!==n.enabled&&(ne(e),n.dispatchEvent(a),r=s.NONE)}function de(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",de,!1),n.domElement.addEventListener("mousedown",oe,!1),n.domElement.addEventListener("wheel",se,!1),n.domElement.addEventListener("touchstart",ce,!1),n.domElement.addEventListener("touchend",le,!1),n.domElement.addEventListener("touchmove",he,!1),window.addEventListener("keydown",re,!1),this.update()});f.prototype=Object.create(p["w"].prototype),f.prototype.constructor=f,Object.defineProperties(f.prototype,{center:{get:function(){return console.warn("THREE.MapControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var g=n("4e15"),v=n("93e9"),y=n("32d9"),j=n("b317"),O=(n("d81d"),n("34ad")),x=function(){function e(t){Object(d["a"])(this,e),this.APP=t,this.gltfLoader=new O["a"],this.gltfGroup=new p["A"],this.gltfGroup.name="glbGroup",this.nameList=[],this.position={}}return Object(u["a"])(e,[{key:"loadModel",value:function(){var e=this;return new Promise((function(t){var n="/test_unity_webgl/three3/3DModels/metaland4.glb";e.gltfLoader.load(n,(function(n){var o=n.scene;e.setCastShadow(o),e.setReceiveShadow(o),t(o.children[0])}))}))}},{key:"setCastShadow",value:function(e){var t=function e(t){t.castShadow=!0,t.children.length>0&&t.children.map((function(t){e(t)}))};t(e)}},{key:"setReceiveShadow",value:function(e){var t=function e(t){t.receiveShadow=!0,t.material&&(t.material.side=p["t"],t.material.shadowSide=p["f"]),t.children.length>0&&t.children.map((function(t){e(t)}))};t(e)}}]),e}(),M=x,k=(n("caad"),n("2532"),function(e,t,n,o,i,a,s,r,c){var h,l,d,u=new p["vb"],m=new p["Lb"],b=[],w=100;function f(n){g(n),u.setFromCamera(m,t);var o=u.intersectObjects([e],!0);0!=o.length&&(o.length>0&&(h=o[0].point||new p["Mb"](0,0,0)),console.log(o[0].object.position,"当前点击位置"))}function g(e){var t,n;e.changedTouches?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.clientX,n=e.clientY),m.x=t/window.innerWidth*2-1,m.y=-n/window.innerHeight*2+1}function v(n){g(n),u.setFromCamera(m,t);var o=u.intersectObjects([e],!0);if(0!=o.length&&o.length>0){l=o[0].object,d=o[0].point||new p["Mb"](0,0,0),"paizi"!==l.name&&"paizi"!==l.parent.name||i(c[0],c[1],c[2],c[3],c[4],c[5]);var a=d.x==h.x&&d.y==h.y&&d.z==h.z&&("bridge"===l.name||"bridge"===l.parent.name||"road_A"===l.name||"road_A"===l.parent.name);if(a){var s=Math.sqrt(Math.pow(Math.abs(t.position.x-o[0].point.x),2)+Math.pow(Math.abs(t.position.z-o[0].point.z),2));if(s>w){var b=s/w;1e3*b}else 1e3;var f=new p["Mb"](o[0].point.x,o[0].point.y+88,o[0].point.z);r.walk(f)}}}function y(i){var a,s;console.log(t.position,"相机位置"),console.log(o.target,"控制器的朝向"),i.changedTouches?(a=i.changedTouches[0].pageX,s=i.changedTouches[0].pageY):(a=i.clientX,s=i.clientY),m.x=a/window.innerWidth*2-1,m.y=-s/window.innerHeight*2+1,u.setFromCamera(m,t);var r=u.intersectObjects([e],!0);if(0!=r.length)if(""==r[0].object.name);else{b.pop(),b.push(r[0].object.parent),n.selectedObjects=b;var c=r[0].object.parent.parent.name;c.includes("smcyy_jmkl_f16_")?n.visibleEdgeColor.set("#e75f58"):n.visibleEdgeColor.set(parseInt("0x00FFFF"))}}window.addEventListener("mousedown",f),window.addEventListener("mousemove",y),window.addEventListener("mouseup",v)}),P=function(e){for(var t=new Array,n=0;n<e.points.length;n++){var o=e.points[n];t.push(new p["Mb"](o.x,o.y,o.z))}var i=new p["m"](t,!1,"catmullrom",1e-9);return i},E=function(e,t){var n=e.getPoints(100),o=new p["i"];o.vertices=n;var i=new p["I"]({color:4491519}),a=new p["H"](o,i);return a.uuid=t.No,a.name=t.Name,a.type="Route",a},S=n("4086"),z=n("e642"),T=n("8710"),L=Object(u["a"])((function e(t){Object(d["a"])(this,e),Object(m["a"])(this,"Load",(function(e,t){var n=new S["a"];function o(n){var o=new z["a"];function i(n){n.scale.set(1,1,1),n.traverse((function(e){e instanceof p["W"]&&(e.geometry.applyMatrix((new p["V"]).makeRotationY(Math.PI/2)),e.material.transparent=!0)})),e[t](n)}o.setMaterials(n),o.load("/test_unity_webgl/three3/3DModels/CartoonMan008.obj",i)}n.load("/test_unity_webgl/three3/3DModels/CartoonMan008.mtl",o)})),Object(m["a"])(this,"LoadFBX",(function(e,t){var n=new T["a"];function o(n){n.scale.set(.2,.2,.2),n.traverse((function(e){e instanceof p["W"]&&(e.geometry.applyMatrix((new p["V"]).makeRotationY(Math.PI/2)),e.material.transparent=!0)})),e[t](n)}n.load("/test_unity_webgl/three3/3DModels/Standard Idle.fbx",o)})),t=t||{scale:.1},this.scale=t.scale})),R=L,C=(n("7db0"),n("4e82"),n("4de4"),n("10a2")),D=function(){function e(t,n,o,i,a){Object(d["a"])(this,e),this.arr=a,this.scene=t,this.camera=n,this.world=i,this.controls=o,this.gltfLoader=new O["a"],this.gltfGroup=new p["A"],this.gltfGroup.name="glbGroup"}return Object(u["a"])(e,[{key:"loadModel",value:function(){var e=this;return new Promise((function(t){var n=e,o="/test_unity_webgl/three3/3DModels/Soldier.glb",i=new C["d"]("default"),a=null;n.gltfLoader.load(o,(function(e){a=e.scene,a.children[0].scale.set(1,1,1),a._size={length:100,height:182,width:20},a.children[0].position.add(new p["Mb"](0,-a._size.height/2,0)),a.children[0].applyMatrix4((new p["V"]).makeRotationY(Math.PI/180*-180)),a.position.add(new p["Mb"](0,a._size.height/2+200,0)),a.rotateY(Math.PI/180*90),a.updateMatrix(),a.name="person",a.position.set(0,-300,0),a.visible=!0,n.scene.add(a);var o=e.animations,s=new p["d"](a),r=o[0],h=o[1],l=o[3];a.idleAction=s.clipAction(r),a.idleAction.timeScale=2,a.runAction=s.clipAction(h),a.walkAction=s.clipAction(l),a.walkAction.timeScale=2,a.idleAction.play();var d=new p["o"];setInterval((function(){s.update(d.getDelta())}),50),a.walk=function(e){a.walkData={speed:350,originPos:a.position.clone(),cameraOriginPos:n.camera.position.clone(),destination:e,vector:new p["Mb"](e.x-a.position.x,0,e.z-a.position.z),distance:new p["Mb"](e.x-a.position.x,0,e.z-a.position.z).length(),state:"walk"};var t=a.position.clone(),o=a.quaternion,s=a._size,r=new C["a"]({mass:1,position:new C["f"](t.x,t.y,t.z),shape:new C["b"](new C["f"](s.length/2,s.height/2,s.width/2)),quaternion:new C["e"](o.x,o.y,o.z,o.w),material:i,velocity:new C["f"](0,0,0)});r.name="gltf",r.fixedRotation=!0,r.updateMassProperties(),a.walkData.cannon=r;var c=a.walkData,h=c.speed,l=c.originPos,d=c.cameraOriginPos,u=c.vector,m=c.distance;!function(){var e=(new p["qb"]).setFromUnitVectors(new p["Mb"](0,0,1),u.clone().normalize());a.quaternion.copy(e),a.updateMatrix(),r.quaternion.set(e.x,e.y,e.z,e.w)}(),r.position.set(l.x,l.y,l.z);var b=u.clone().normalize().setLength(h);r.velocity=new C["f"](b.x,b.y,b.z),a.walkAction.play(),a.idleAction.stop(),n.world.addBody(r),a.walkData.refreshFrameId=requestAnimationFrame((function e(){if(a.walkData&&(a.walkData.refreshFrameId=requestAnimationFrame(e),n.world.bodies.find((function(e){return"gltf"==e.name})))){var t=r.position,o=r.quaternion;a.position.set(t.x,t.y,t.z),a.quaternion.set(o.x,o.y,o.z,o.w),n.camera.position.copy(d.clone().add(a.position.clone().sub(l.clone()))),n.controls.target.copy(a.position)}})),a.walkData.watchFrameId=requestAnimationFrame((function e(){a.walkData&&(a.walkData.watchFrameId=requestAnimationFrame(e),a.walk_upStage(),a.walk_downStage())})),a.walkData.timer=setTimeout((function(){a.walk_over(e,d,u)}),m/h*1e3)},a.walk_upStage=function(){var e=a.walkData,t=e.state,o=e.cannon,i=e.vector,s=e.speed,r=i.clone().normalize().setLength(s);if("walk"===t){var h=[],l=[],d=a._size,u=d.length,m=d.height,b=d.width;if(l.push.apply(l,Object(c["a"])(new p["J"](new p["Mb"](-u/2,m/2,b/2),new p["Mb"](u/2,m/2,b/2)).getPoints(50))),l.push.apply(l,Object(c["a"])(new p["J"](new p["Mb"](u/2,m/2,b/2),new p["Mb"](u/2,-m/2,b/2)).getPoints(50))),l.push.apply(l,Object(c["a"])(new p["J"](new p["Mb"](u/2,-m/2,b/2),new p["Mb"](-u/2,-m/2,b/2)).getPoints(50))),l.push.apply(l,Object(c["a"])(new p["J"](new p["Mb"](-u/2,-m/2,b/2),new p["Mb"](-u/2,m/2,b/2)).getPoints(50))),l.forEach((function(e){var t=e.applyMatrix4(a.matrix).add(i.clone().normalize().multiplyScalar(-2)).add(new p["Mb"](0,2,0)),o=new p["vb"](t,i.clone().normalize(),.1,1e5),s=o.intersectObjects(n.arr);s[0]&&h.push(s[0])})),h=h.map((function(e){return e.distance-=2,e})).filter((function(e){return e.distance>=0})).sort((function(e,t){return t.distance<=e.distance?1:t.distance>e.distance?-1:void 0})),h.length&&h[0].distance<10){var w,f;a.walkData.state="upStage",Math.pow(2,1123),o.avoidRepeat=!0,o.sleep();var g=r.x,v=r.y,y=r.z;o.velocity=new C["f"](g,v,y);var j=a.position,O=j.x,x=j.y,M=j.z,k=i.clone().normalize().multiplyScalar(h[0].distance+1),P=[O+k.x,x+h[0].object._height,M+k.z];(w=o.position).set.apply(w,P),(f=a.position).set.apply(f,P),a.walkData.upStage_timer=setTimeout((function(){a.walkData&&(o.applyImpulse(new C["f"](1e-4,1e-4,1e-4)),o.avoidRepeat=!1,a.walkData.state="walk")}),50)}}},a.walk_downStage=function(){var e=a.walkData,t=e.state,o=e.cannon,i=e.vector,s=e.speed,r=i.clone().normalize().setLength(s);if("walk"===t){var h=[],l=[],d=a._size,u=d.length,m=d.height,b=d.width;l.push.apply(l,Object(c["a"])(new p["J"](new p["Mb"](-u/2,-m/2,-b/2),new p["Mb"](u/2,-m/2,-b/2)).getPoints(50))),l.push.apply(l,Object(c["a"])(new p["J"](new p["Mb"](u/2,-m/2,-b/2),new p["Mb"](u/2,-m/2,b/2)).getPoints(50))),l.push.apply(l,Object(c["a"])(new p["J"](new p["Mb"](u/2,-m/2,b/2),new p["Mb"](-u/2,-m/2,b/2)).getPoints(50))),l.push.apply(l,Object(c["a"])(new p["J"](new p["Mb"](-u/2,-m/2,b/2),new p["Mb"](-u/2,-m/2,-b/2)).getPoints(50))),l.forEach((function(e){var t,o=e.applyMatrix4(a.matrix).add(new p["Mb"](0,2,0)),i=new p["vb"](o,new p["Mb"](0,-1,0),.1,1e5),s=i.intersectObjects(n.arr);h.push((null===(t=s[0])||void 0===t?void 0:t.distance)||0)}));var w=Math.min.apply(Math,h)-2;if(w>5){var f,g;a.walkData.state="downStage",Math.pow(2,1123),o.avoidRepeat=!0,o.sleep();var v=r.x,y=r.y,j=r.z;o.velocity=new C["f"](v,y,j);var O=a.position,x=O.x,M=O.y,k=O.z,P=i.clone().normalize(),E=[x+P.x,M-w,k+P.z];(f=o.position).set.apply(f,E),(g=a.position).set.apply(g,E),a.walkData.downStage_timer=setTimeout((function(){a.walkData&&(o.applyImpulse(new C["f"](1e-4,1e-4,1e-4)),o.avoidRepeat=!1,a.walkData.state="walk")}),50)}}},a.walk_over=function(e,t,o){var i,s;a.position.set(e.x,e.y,e.z),n.camera.position.copy(t.clone().add(o)),n.controls.target.copy(e),a.idleAction.play(),a.walkAction.stop(),(null===(i=a.walkData)||void 0===i?void 0:i.timer)&&clearTimeout(a.walkData.timer),a.walkData.downStage_timer&&clearTimeout(a.walkData.downStage_timer),a.walkData.upStage_timer&&clearTimeout(a.walkData.upStage_timer),a.walkData.refreshFrameId&&cancelAnimationFrame(a.walkData.refreshFrameId),a.walkData.watchFrameId&&cancelAnimationFrame(a.walkData.watchFrameId),(null===(s=a.walkData)||void 0===s?void 0:s.cannon)&&n.world.removeBody(a.walkData.cannon),a.walkData=null},t(a)}))}))}}]),e}(),A=D,I=function(){function e(){Object(d["a"])(this,e),Object(m["a"])(this,"initMain",Object(l["a"])(Object(h["a"])().mark((function e(){return Object(h["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.initScene(),this.initCamera(),this.initRenderer(),this.initOrbitControl(),this.setCameraTarget(),e.next=7,this.initWord();case 7:return this.initStats(),this.initBuilding(),e.next=11,this.initPerson();case 11:this.initLight(),this.initoutLine(),this.initComposer(),this.initObjectSelect(),this.initAgvCar(),this.initReSize(this),this.resetEyes();case 18:case"end":return e.stop()}}),e,this)})))),Object(m["a"])(this,"initWord",(function(){var e=this;return new Promise((function(t){e.world=new C["g"],e.world.gravity.set(0,-9.8,0),e.defaultMaterial=new C["d"]("default");var n=new C["c"](e.defaultMaterial,e.defaultMaterial,{friction:0,restitution:0});e.world.addContactMaterial(n),e.clock=new p["o"],t(e.world)}))})),Object(m["a"])(this,"initSub",(function(e,t){this.initScene(),this.initCameraSub(e),this.initRenderer(),this.initOrbitControl(),this.initLight(),"Store"==e?this.initSubStore(t):"StoreGroup"==e&&this.initSubGroup(t),this.initoutLine(),this.initComposer(),this.initObjectSelect()})),Object(m["a"])(this,"start",(function(){this.initMain(),this.animate()})),Object(m["a"])(this,"startSub",(function(){this.animateSub()})),Object(m["a"])(this,"initScene",(function(){this.scene=new p["xb"]})),Object(m["a"])(this,"initCameraSub",(function(e){this.camera=new p["lb"](60,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.z=800,"Store"==e?(this.camera.position.y=600,this.camera.position.x=200):"StoreGroup"==e&&(this.camera.position.y=100,this.camera.position.x=0),this.camera.lookAt(new p["Mb"](0,0,0)),this.scene.add(this.camera)})),Object(m["a"])(this,"initCamera",(function(){this.camera=new p["lb"](60,window.innerWidth/window.innerHeight,.1,32e3),this.scene.add(this.camera)})),Object(m["a"])(this,"resetEyes",(function(){this.cameraMotion(this.cameraPosition[0],this.cameraPosition[1],this.cameraPosition[2],this.controlTarget[0],this.controlTarget[1],this.controlTarget[2])})),Object(m["a"])(this,"initRenderer",(function(){this.renderer=new p["Qb"]({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(3760283),this.renderer.setPixelRatio(window.devicePixelRatio);var e=document.getElementById("container");e.appendChild(this.renderer.domElement)})),Object(m["a"])(this,"initComposer",(function(){var e=new v["a"](this.scene,this.camera);this.composer=new y["a"](this.renderer),this.composer.addPass(e),this.composer.addPass(this.outlinePass)})),Object(m["a"])(this,"initoutLine",(function(){this.outlinePass=new g["a"](new p["Lb"](window.innerWidth,window.innerWidth),this.scene,this.camera),this.outlinePass.edgeStrength=2,this.outlinePass.edgeGlow=4,this.outlinePass.usePatternTexture=!1,this.outlinePass.edgeThickness=4,this.outlinePass.downSampleRatio=1,this.outlinePass.pulsePeriod=5,this.outlinePass.visibleEdgeColor.set(parseInt("0x00FFFF")),this.outlinePass.hiddenEdgeColor=new p["p"](0,0,0),this.outlinePass.renderToScreen=!0})),Object(m["a"])(this,"initObjectSelect",(function(){k(this.scene,this.camera,this.outlinePass,this.orbitControl,this.cameraMotion.bind(this),this.cameraPosition,this.controlTarget,this.PersonModels,[].concat(Object(c["a"])(this.personDefaultPosition),Object(c["a"])(this.personDefaultTarget)))})),Object(m["a"])(this,"initLight",(function(){var e=new p["b"](16777215,1);e.position.set(0,0,0),this.addObject(e);var t=new p["s"](16777215,.3);t.position.set(0,200,0),this.addObject(t);var n=new p["mb"](16777215,.3);n.position.set(-500,200,0),this.addObject(n);var o=new p["mb"](16777215,.3);o.position.set(500,200,0),this.addObject(o)})),Object(m["a"])(this,"initOrbitControl",(function(){this.orbitControl=new f(this.camera,this.renderer.domElement),this.orbitControl.enableDamping=!0,this.orbitControl.dampingFactor=.5,this.orbitControl.minDistance=0,this.orbitControl.maxDistance=2e3,this.orbitControl.maxPolarAngle=Math.PI/2.2,this.orbitControl.mouseButtons={LEFT:p["R"].ROTATE,MIDDLE:p["R"].DOLLY,RIGHT:p["R"].PAN}})),Object(m["a"])(this,"initStats",(function(){this.stats=new b["a"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.up="0px",document.body.appendChild(this.stats.domElement)})),Object(m["a"])(this,"initAxisHelper",(function(){var e=new p["e"](1e3);this.addObject(e)})),Object(m["a"])(this,"addObject",(function(e){this.scene.add(e),this.objects.push(e)})),Object(m["a"])(this,"initPerson",(function(){var e=this;return new Promise((function(t){var n=e,o=new A(e.scene,e.camera,e.orbitControl,n.world,e.objects);o.loadModel().then((function(e){n.PersonModels=e,t(e)}))}))})),Object(m["a"])(this,"initBuilding",(function(){var e=this,t=new M;t.loadModel().then((function(t){t.position.set(0,-400,0),t.scale.set(1,1,1),t.name="smcyy_jmkl",console.log(t,"建筑模型"),e.scene.add(t)})),console.log(this.scene,"当前场景"),console.log(this.camera.position,"当前相机位置"),console.log(this.orbitControl.target,"当前控制器的朝向")})),Object(m["a"])(this,"initRouteData",(function(){for(var e=this.buildingObjects.objects,t=0;t<e.length;t++){var n=e[t];switch(n.objectType){case"route":this.curve=P(n),this.addObject(E(this.curve,n));break}}})),Object(m["a"])(this,"showAgvCar",(function(e){e.name="AGV小车",e.position.set(0,0,0),e.visible=!1,this.AgvCar=e,this.addObject(e)})),Object(m["a"])(this,"initAgvCar",(function(){var e=new R;e.LoadFBX(this,"showAgvCar")})),Object(m["a"])(this,"setCar",(function(e,t){var n=this.scene.getObjectByName("AGV小车");n.visible=e,n.position.x=t.x,n.position.y=t.y,n.position.z=t.z})),Object(m["a"])(this,"removeObject",(function(e){for(var t=0;t<this.objects.length;t++){var n=this.objects[t];n.name!=e&&n.id!=e||(this.objects.splice(t,1),this.scene.remove(n))}})),Object(m["a"])(this,"changeTemperatureShow",(function(){if(1==this.tmpIsShow){for(var e=0;e<this.objectLockPointer.length;e++){var t=this.objectLockPointer[e];"Temperature"==t.type?this.removeObject(t.id):"StoreSign"==t.type&&this.addObject(t)}this.tmpIsShow=0}else{for(var n=0;n<this.objectLockPointer.length;n++){var o=this.objectLockPointer[n];"Temperature"==o.type?this.addObject(o):"StoreSign"==o.type&&this.removeObject(o.id)}this.tmpIsShow=1}})),Object(m["a"])(this,"changeRoomRateShow",(function(){if(1==this.roomRateShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"StoreShelf"!=t.type&&"StoreGoods"!=t.type||this.scene.remove(t)}this.showRoomRate(),this.roomRateShow=0}else{for(var n=0;n<this.objects.length;n++){var o=this.objects[n];"StoreShelf"!=o.type&&"StoreGoods"!=o.type||this.scene.add(o)}for(var i=0;i<this.objectsRoomRate.length;i++){var a=this.objectsRoomRate[i];this.removeObject(a.id)}this.objectsRoomRate=[],this.roomRateShow=1}})),Object(m["a"])(this,"changeStoreShow",(function(){if(1==this.storeIsShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"Store"==t.type&&this.scene.remove(t)}this.storeIsShow=0}else{for(var n=0;n<this.objects.length;n++){var o=this.objects[n];"Store"==o.type&&this.scene.add(o)}this.storeIsShow=1}})),Object(m["a"])(this,"changeShelfShow",(function(){if(1==this.shelfIsShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"StoreShelf"==t.type&&this.scene.remove(t)}this.shelfIsShow=0}else{for(var n=0;n<this.objects.length;n++){var o=this.objects[n];"StoreShelf"==o.type&&this.scene.add(o)}this.shelfIsShow=1}})),Object(m["a"])(this,"changeBackGround",(function(){void 0==this.scene.getObjectByName("StarSky",!1)?this.addObject(this.skyBox):this.removeObject(this.skyBox.name)})),Object(m["a"])(this,"getExistedGoodType",(function(e){for(var t=0;t<this.goodTypes.length;t++){var n=this.goodTypes[t];if(n.type===e)return n.object}return null})),Object(m["a"])(this,"changeSpriteShow",(function(){if(1==this.spriteIsShow){for(var e=0;e<this.objectLockPointer.length;e++){var t=this.objectLockPointer[e];this.removeObject(t.id)}this.spriteIsShow=0}else{for(var n=0;n<this.objectLockPointer.length;n++){var o=this.objectLockPointer[n];this.addObject(o)}this.spriteIsShow=1}})),Object(m["a"])(this,"initPointLockControl",(function(e){this.lockcontrols=new j["a"](this.camera),this.raycaster=new p["vb"](new p["Mb"],new p["Mb"](0,-1,0),0,10);var t=function(t){switch(t.keyCode){case 38:case 87:e.moveForward=!0;break;case 37:case 65:e.moveLeft=!0;break;case 40:case 83:e.moveBackward=!0;break;case 39:case 68:e.moveRight=!0;break;case 32:!0===e.canJump&&(e.velocity.y+=350),e.canJump=!1;break}},n=function(t){switch(t.keyCode){case 38:case 87:e.moveForward=!1;break;case 37:case 65:e.moveLeft=!1;break;case 40:case 83:e.moveBackward=!1;break;case 39:case 68:e.moveRight=!1;break}};document.addEventListener("keydown",t,!1),document.addEventListener("keyup",n,!1)})),Object(m["a"])(this,"lockControl",(function(){1==this.spriteIsShow&&this.changeSpriteShow(),this.camera.position.y=100,this.camera.lookAt(0,100,0),this.lockcontrols.getObject().position.x=0,this.lockcontrols.getObject().position.y=100,this.lockcontrols.getObject().position.z=580,this.lockcontrols.lock()})),Object(m["a"])(this,"firstPersonMove",(function(){if(!0===this.lockcontrols.isLocked){this.raycaster.ray.origin.copy(this.lockcontrols.getObject().position),this.raycaster.ray.origin.y-=10;var e=this.raycaster.intersectObjects(this.objects),t=e.length>0,n=performance.now(),o=(n-this.prevTime)/1e3;this.velocity.x-=10*this.velocity.x*o,this.velocity.z-=10*this.velocity.z*o,this.velocity.y-=9.8*100*o,this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveLeft)-Number(this.moveRight),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=2e3*this.direction.z*o),(this.moveLeft||this.moveRight)&&(this.velocity.x-=2e3*this.direction.x*o),!0===t&&(this.velocity.y=Math.max(0,this.velocity.y),this.canJump=!0),this.lockcontrols.getObject().translateX(this.velocity.x*o),this.lockcontrols.getObject().position.y+=this.velocity.y*o,this.lockcontrols.getObject().translateZ(this.velocity.z*o),this.lockcontrols.getObject().position.y<100&&(this.velocity.y=0,this.lockcontrols.getObject().position.y=100,this.canJump=!0),this.prevTime=n}})),Object(m["a"])(this,"changeStats",(function(){"none"==this.stats.domElement.style.display?this.stats.domElement.style.display="block":this.stats.domElement.style.display="none"})),Object(m["a"])(this,"initReSize",(function(e){window.addEventListener("resize",(function(){e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight)}),!1)})),Object(m["a"])(this,"animate",(function(){requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update(),this.composer.render(),w["a"].update();var e=this.clock.getDelta();e>0&&this.world.step(e)})),Object(m["a"])(this,"animateSub",(function(){requestAnimationFrame(this.animateSub.bind(this)),this.renderer.render(this.scene,this.camera),this.composer.render();var e=this.clock.getDelta();e>0&&this.world.step(e)})),this.scene=null,this.camera=null,this.renderer=null,this.orbitControl=null,this.objects=[],this.firstTime=1,this.time=0,this.roomRateShow=1,this.goodTypes=[],this.objectsRoomRate=[],this.velocity=new p["Mb"],this.direction=new p["Mb"],this.prevTime=performance.now(),this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.canJump=!1,this.objectLockPointer=[],this.spriteIsShow=1,this.storeIsShow=1,this.groupIsShow=1,this.shelfIsShow=1,this.skyBox=null,this.buildingObjects={objects:[{objName:"AGVRoute",objectType:"route",points:[{x:-87.77039193374166,y:28,z:-149.68967301478148},{x:-86.29625542778217,y:28,z:-147.37658737038709},{x:-84.72392809392323,y:28,z:-145.20440236296008},{x:-84.19328255270113,y:28,z:-144.00600041251545},{x:-85.68297814786274,y:28,z:-142.62387567157188},{x:-87.10967327557685,y:28,z:-144.4436401550513},{x:-88.3224285766881,y:28,z:-146.17127393590079},{x:-89.25420647753265,y:28,z:-147.15669569644288},{x:-90.56994450449761,y:28,z:-147.86549145299722},{x:-92.08329592007794,y:28,z:-146.54954990067264},{x:-93.32239227659437,y:28,z:-145.7743701640501},{x:-93.94092981053659,y:28,z:-145.13957498854137},{x:-94.54107854310807,y:28,z:-144.71196645549497},{x:-94.11666865802309,y:28,z:-144.0864202705672},{x:-93.24120204664192,y:28,z:-143.42528784121254},{x:-92.82511652429176,y:28,z:-142.63944189904123},{x:-92.73012600640793,y:28,z:-142.16064316787103},{x:-93.69826829041304,y:28,z:-141.40554811247003},{x:-94.28461366794534,y:28,z:-140.88020166672612},{x:-93.51589846439283,y:28,z:-139.58112633543183},{x:-92.25604687075987,y:28,z:-137.70880711649102},{x:-91.01935860840891,y:28,z:-136.0878275909687},{x:-92.4306159263767,y:28,z:-135.02978443001484},{x:-94.32924393850449,y:28,z:-133.77974406691243},{x:-95.41306191120177,y:28,z:-132.80428323625742},{x:-95.96300542026123,y:28,z:-132.43714835308035},{x:-98.16138567442687,y:28,z:-135.1662577353178},{x:-99.13055805675616,y:28,z:-136.6176112752607},{x:-100.18455766647499,y:28,z:-135.7351726676191},{x:-102.3283543858391,y:28,z:-134.12124150988643},{x:-100.2369579898838,y:28,z:-130.1078578563907},{x:-98.02482491584506,y:28,z:-128.49722011477448},{x:-96.25804199956815,y:28,z:-129.70321028765647},{x:-91.85047211197177,y:28,z:-134.21793975901087},{x:-89.63022184209623,y:28,z:-135.07078214496096},{x:-85.8992095983462,y:28,z:-137.03224419506736},{x:-85.40625278148313,y:28,z:-136.12072162141482},{x:-90.0602855186697,y:28,z:-132.9849305290307},{x:-92.2537037163749,y:28,z:-131.4232344630381}]}]},this.cameraPosition=[-1217.9921323680578,286.08207747770115,5531.444886966041],this.controlTarget=[-861.6553793837406,1.452400931130384,3584.136471305702],this.personDefaultPosition=[-406.50507291207265,-220.10417395265176,1336.2503571153645],this.personDefaultTarget=[-444.6869098033287,-309.6406521846675,1000.4230948945715],this.world=null,this.defaultMaterial=null,this.clock=null,this.PersonModels=null}return Object(u["a"])(e,[{key:"setCameraTarget",value:function(){this.orbitControl.target.set(this.controlTarget[0],this.controlTarget[1],this.controlTarget[2])}},{key:"cameraMotion",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=new w["a"].Tween({x1:this.camera.position.x,y1:this.camera.position.y,z1:this.camera.position.z,x2:this.orbitControl.target.x,y2:this.orbitControl.target.y,z2:this.orbitControl.target.z});s.to({x1:e,y1:t,z1:n,x2:o,y2:i,z2:a},1e3);var r=this;s.onUpdate((function(e){r.camera.position.x=e.x1,r.camera.position.y=e.y1,r.camera.position.z=e.z1,r.orbitControl.target.x=e.x2,r.orbitControl.target.y=e.y2,r.orbitControl.target.z=e.z2,r.orbitControl.update()})),s.onComplete((function(){})),s.easing(w["a"].Easing.Exponential.InOut),s.start(),s.update()}}]),e}(),F=I,_=null,N={name:"Home",data:function(){return{list:["岛屿1","岛屿2","岛屿3","岛屿4"],currentIndex:null,room0cameraPosition:[28.43003964176088,1.452889762713346,304.39723202981133],room0controlTarget:[28.429775084701777,1.4524009311303967,304.3964701944072],room1cameraPosition:[341.3187824529851,258.589532381425,29.96280443327055],room1controlTarget:[-134.67617024276637,1.4524009311304222,-189.90002092587525],room2cameraPosition:[679.483074222167,1.4524009311308381,-147.06661768887224],room2controlTarget:[679.483074222166,1.4524009311303852,-147.0666176888725],room3cameraPosition:[9.87853230093765,212.84370573178734,-500.05727486924764],room3controlTarget:[-338.33665224294924,1.4524009311303825,-519.3413577005416],room0Person:{x:35.396950189773655,y:-112.01401222885976,z:219.85335656254063},room1Person:{x:272.05169551814424,y:172.35301065548248,z:-22.821989980502224},room2Person:{x:530.5205816513906,y:-100.545571007452,z:-185.17160492442656},room3Person:{x:-45.64095606463366,y:142.84145836751168,z:-487.8489716493898}}},created:function(){},mounted:function(){this.mapInit()},methods:{mapInit:function(){_=new F,_.start()},chooseRoom:function(e){this.currentIndex=e,0===e&&(_.cameraMotion(this.room0cameraPosition[0],this.room0cameraPosition[1],this.room0cameraPosition[2],this.room0controlTarget[0],this.room0controlTarget[1],this.room0controlTarget[2]),_.setCar(!0,this.room0Person)),1===e&&(_.cameraMotion(this.room1cameraPosition[0],this.room1cameraPosition[1],this.room1cameraPosition[2],this.room1controlTarget[0],this.room1controlTarget[1],this.room1controlTarget[2]),_.setCar(!0,this.room1Person)),2===e&&(_.cameraMotion(this.room2cameraPosition[0],this.room2cameraPosition[1],this.room2cameraPosition[2],this.room2controlTarget[0],this.room2controlTarget[1],this.room2controlTarget[2]),_.setCar(!0,this.room2Person)),3===e&&(_.cameraMotion(this.room3cameraPosition[0],this.room3cameraPosition[1],this.room3cameraPosition[2],this.room3controlTarget[0],this.room3controlTarget[1],this.room3controlTarget[2]),_.setCar(!0,this.room3Person))},reset:function(){this.currentIndex=null,_.resetEyes(),_.setCar(!1,{x:0,y:0,z:0})}}},H=N,Y=(n("ccdb"),n("2877")),B=Object(Y["a"])(H,s,r,!1,null,"8ba45596",null),G=B.exports,Z={name:"App",components:{home:G}},X=Z,q=(n("034f"),Object(Y["a"])(X,i,a,!1,null,null,null)),U=q.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(U)}}).$mount("#app")},"85ec":function(e,t,n){},a1b8:function(e,t,n){},ccdb:function(e,t,n){"use strict";n("a1b8")}});
//# sourceMappingURL=app.6d9d4cd9.js.map