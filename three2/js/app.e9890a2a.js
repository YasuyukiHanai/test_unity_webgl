(function(e){function t(t){for(var n,s,r=t[0],c=t[1],h=t[2],m=0,u=[];m<r.length;m++)s=r[m],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(u.length)u.shift()();return a.push.apply(a,h||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,r=1;r<o.length;r++){var c=o[r];0!==i[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},i={app:0},a=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var h=0;h<r.length;h++)t(r[h]);var l=c;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";o("85ec")},"229f":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("home")],1)},a=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{ref:"threeMapDialog",attrs:{id:"container"}}),o("div",{staticClass:"view"},[o("div",{on:{click:e.reset}},[e._v("全局视角")]),e._l(e.list,(function(t,n){return o("div",{key:n,class:n===e.currentIndex?"blue":"",on:{click:function(t){return e.chooseRoom(n)}}},[e._v(e._s(t))])}))],2)])},r=[],c=o("d4ec"),h=o("bee2"),l=o("ade3"),m=(o("b0c0"),o("a434"),o("a9e3"),o("5a89")),u=o("ef20"),d=o("22b5"),b=(o("d3b7"),o("ddb0"),o("4c53"),function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new m["Kb"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:m["P"].LEFT,MIDDLE:m["P"].MIDDLE,RIGHT:m["P"].RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(n),o.update(),r=s.NONE},this.update=function(){var t=new m["Kb"],i=(new m["ob"]).setFromUnitVectors(e.up,new m["Kb"](0,1,0)),a=i.clone().inverse(),p=new m["Kb"],f=new m["ob"];return function(){var e=o.object.position;return t.copy(e).sub(o.target),t.applyQuaternion(i),h.setFromVector3(t),o.autoRotate&&r===s.NONE&&M(z()),h.theta+=l.theta,h.phi+=l.phi,h.theta=Math.max(o.minAzimuthAngle,Math.min(o.maxAzimuthAngle,h.theta)),h.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=u,h.radius=Math.max(o.minDistance,Math.min(o.maxDistance,h.radius)),o.target.add(d),t.setFromSpherical(h),t.applyQuaternion(a),e.copy(o.target).add(t),o.object.lookAt(o.target),!0===o.enableDamping?(l.theta*=1-o.dampingFactor,l.phi*=1-o.dampingFactor,d.multiplyScalar(1-o.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),u=1,!!(b||p.distanceToSquared(o.object.position)>c||8*(1-f.dot(o.object.quaternion))>c)&&(o.dispatchEvent(n),p.copy(o.object.position),f.copy(o.object.quaternion),b=!1,!0)}}(),this.dispose=function(){o.domElement.removeEventListener("contextmenu",me,!1),o.domElement.removeEventListener("mousedown",ne,!1),o.domElement.removeEventListener("wheel",se,!1),o.domElement.removeEventListener("touchstart",ce,!1),o.domElement.removeEventListener("touchend",le,!1),o.domElement.removeEventListener("touchmove",he,!1),document.removeEventListener("mousemove",ie,!1),document.removeEventListener("mouseup",ae,!1),window.removeEventListener("keydown",re,!1)};var o=this,n={type:"change"},i={type:"start"},a={type:"end"},s={NONE:0,ROTATE_UP:1,ROTATE_LEFT:2,ROTATE:3,DOLLY:4,DOLLY_ROTATE:7,PAN:8,DOLLY_PAN:12},r=s.NONE,c=1e-6,h=new m["Ab"],l=new m["Ab"],u=1,d=new m["Kb"],b=!1,p=new m["Jb"],f=new m["Jb"],g=new m["Jb"],v=new m["Jb"],y=new m["Jb"],w=new m["Jb"],j=new m["Jb"],O=new m["Jb"],P=new m["Jb"],E=new m["Jb"],x=new m["Jb"],S=new m["Jb"],T=new m["Jb"],k=new m["Jb"];function z(){return 2*Math.PI/60/60*o.autoRotateSpeed}function C(){return Math.pow(.95,o.zoomSpeed)}function M(e){l.theta-=e}function R(e){l.phi-=e}var L=function(){var e=new m["Kb"];return function(t,o){e.setFromMatrixColumn(o,0),e.multiplyScalar(-t),d.add(e)}}(),A=function(){var e=new m["Kb"];return function(t,n){!0===o.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),I=function(){var e=new m["Kb"];return function(t,n){var i=o.domElement===document?o.domElement.body:o.domElement;if(o.object.isPerspectiveCamera){var a=o.object.position;e.copy(a).sub(o.target);var s=e.length();s*=Math.tan(o.object.fov/2*Math.PI/180),L(2*t*s/i.clientHeight,o.object.matrix),A(2*n*s/i.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(L(t*(o.object.right-o.object.left)/o.object.zoom/i.clientWidth,o.object.matrix),A(n*(o.object.top-o.object.bottom)/o.object.zoom/i.clientHeight,o.object.matrix)):(console.warn("WARNING: MapControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();function N(e){o.object.isPerspectiveCamera?u/=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function F(e){o.object.isPerspectiveCamera?u*=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function D(e){p.set(e.clientX,e.clientY)}function H(e){S.set(e.clientX,e.clientY)}function Y(e){P.set(e.clientX,e.clientY)}function _(e){g.set(e.clientX,e.clientY),y.subVectors(g,p).multiplyScalar(o.rotateSpeed);var t=o.domElement===document?o.domElement.body:o.domElement;M(2*Math.PI*y.x/t.clientHeight),R(2*Math.PI*y.y/t.clientHeight),p.copy(g),o.update()}function B(e){T.set(e.clientX,e.clientY),k.subVectors(T,S),k.y>0?N(C()):k.y<0&&F(C()),S.copy(T),o.update()}function G(e){E.set(e.clientX,e.clientY),x.subVectors(E,P).multiplyScalar(o.panSpeed),I(x.x,x.y),P.copy(E),o.update()}function K(e){}function X(e){e.deltaY<0?F(C()):e.deltaY>0&&N(C()),o.update()}function Z(e){switch(e.keyCode){case o.keys.UP:I(0,o.keyPanSpeed),o.update();break;case o.keys.BOTTOM:I(0,-o.keyPanSpeed),o.update();break;case o.keys.LEFT:I(o.keyPanSpeed,0),o.update();break;case o.keys.RIGHT:I(-o.keyPanSpeed,0),o.update();break}}function J(e){p.set(e.touches[0].pageX,e.touches[0].pageY),f.set(e.touches[1].pageX,e.touches[1].pageY)}function U(e){if(o.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);S.set(0,i)}}function V(e){o.enablePan&&P.set(e.touches[0].pageX,e.touches[0].pageY)}function W(e){if(!1!==o.enableRotate&&0!==(r&s.ROTATE)){if(g.set(e.touches[0].pageX,e.touches[0].pageY),v.set(e.touches[1].pageX,e.touches[1].pageY),y.subVectors(g,p),w.subVectors(v,f),j.subVectors(f,p),O.subVectors(v,g),q()){var t=o.domElement===document?o.domElement.body:o.domElement;R(2*Math.PI*y.y/t.clientHeight),r=s.ROTATE_UP}else 0!==(r&s.ROTATE_LEFT)&&M((j.angle()-O.angle())*o.rotateSpeed);p.copy(g),f.copy(v)}}function q(){return!!$(j)&&(!!$(O)&&(!!Q(y)&&(!!Q(w)&&y.dot(w)>0)))}var $=function(){var e=Math.sin(Math.PI/6);return function(t){return Math.abs(Math.sin(t.angle()))<e}}(),Q=function(){var e=Math.cos(Math.PI/2-Math.PI/6);return function(t){return Math.abs(Math.cos(t.angle()))<e}}();function ee(e){if(!1!==o.enableZoom&&0!==(r&s.DOLLY)){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);T.set(0,i),k.set(0,Math.pow(T.y/S.y,o.zoomSpeed)),N(k.y),S.copy(T)}}function te(e){!1!==o.enablePan&&0!==(r&s.PAN)&&(E.set(e.touches[0].pageX,e.touches[0].pageY),x.subVectors(E,P).multiplyScalar(o.panSpeed),I(x.x,x.y),P.copy(E))}function oe(e){}function ne(e){if(!1!==o.enabled){switch(e.preventDefault(),e.button){case o.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enableRotate)return;D(e),r=s.ROTATE}else{if(!1===o.enablePan)return;Y(e),r=s.PAN}break;case o.mouseButtons.MIDDLE:if(!1===o.enableZoom)return;H(e),r=s.DOLLY;break;case o.mouseButtons.RIGHT:if(!1===o.enableRotate)return;D(e),r=s.ROTATE;break}r!==s.NONE&&(document.addEventListener("mousemove",ie,!1),document.addEventListener("mouseup",ae,!1),o.dispatchEvent(i))}}function ie(e){if(!1!==o.enabled)switch(e.preventDefault(),r){case s.ROTATE:if(!1===o.enableRotate)return;_(e);break;case s.DOLLY:if(!1===o.enableZoom)return;B(e);break;case s.PAN:if(!1===o.enablePan)return;G(e);break}}function ae(e){!1!==o.enabled&&(K(e),document.removeEventListener("mousemove",ie,!1),document.removeEventListener("mouseup",ae,!1),o.dispatchEvent(a),r=s.NONE)}function se(e){!1===o.enabled||!1===o.enableZoom||r!==s.NONE&&r!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),o.dispatchEvent(i),X(e),o.dispatchEvent(a))}function re(e){!1!==o.enabled&&!1!==o.enableKeys&&!1!==o.enablePan&&Z(e)}function ce(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===o.enablePan)return;V(e),r=s.PAN;break;case 2:if(!1===o.enableZoom&&!1===o.enableRotate)return;J(e),U(e),r=s.DOLLY_ROTATE;break;default:r=s.NONE}r!==s.NONE&&o.dispatchEvent(i)}}function he(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===o.enablePan)return;if(r!==s.PAN)return;te(e),o.update();break;case 2:if(!1===o.enableZoom&&!1===o.enableRotate)return;if(0===(r&s.DOLLY_ROTATE))return;W(e),ee(e),o.update();break;default:r=s.NONE}}function le(e){!1!==o.enabled&&(oe(e),o.dispatchEvent(a),r=s.NONE)}function me(e){!1!==o.enabled&&e.preventDefault()}o.domElement.addEventListener("contextmenu",me,!1),o.domElement.addEventListener("mousedown",ne,!1),o.domElement.addEventListener("wheel",se,!1),o.domElement.addEventListener("touchstart",ce,!1),o.domElement.addEventListener("touchend",le,!1),o.domElement.addEventListener("touchmove",he,!1),window.addEventListener("keydown",re,!1),this.update()});b.prototype=Object.create(m["v"].prototype),b.prototype.constructor=b,Object.defineProperties(b.prototype,{center:{get:function(){return console.warn("THREE.MapControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var p=o("4e15"),f=o("93e9"),g=o("32d9"),v=o("b317"),y=(o("d81d"),o("34ad")),w=function(){function e(t){Object(c["a"])(this,e),this.APP=t,this.gltfLoader=new y["a"],this.gltfGroup=new m["z"],this.gltfGroup.name="glbGroup",this.nameList=[],this.position={}}return Object(h["a"])(e,[{key:"loadModel",value:function(){var e=this;return new Promise((function(t){var o="/test_unity_webgl/three2/3DModels/cartoon_land.gltf";e.gltfLoader.load(o,(function(o){var n=o.scene;e.setCastShadow(n),e.setReceiveShadow(n),t(n.children[0])}))}))}},{key:"setCastShadow",value:function(e){var t=function e(t){t.castShadow=!0,t.children.length>0&&t.children.map((function(t){e(t)}))};t(e)}},{key:"setReceiveShadow",value:function(e){var t=function e(t){t.receiveShadow=!0,t.material&&(t.material.side=m["s"],t.material.shadowSide=m["e"]),t.children.length>0&&t.children.map((function(t){e(t)}))};t(e)}}]),e}(),j=w,O=(o("caad"),o("2532"),function(e,t,o,n,i,a,s){var r=new m["tb"],c=new m["Jb"],h=[];function l(o){var n,i;o.changedTouches?(n=o.changedTouches[0].pageX,i=o.changedTouches[0].pageY):(n=o.clientX,i=o.clientY),c.x=n/window.innerWidth*2-1,c.y=-i/window.innerHeight*2+1,r.setFromCamera(c,t);var a,s=r.intersectObjects([e],!0);0!=s.length&&(s[0]&&s[0].point&&(a=s[0].point,console.log(a,"当前位置")))}function u(o){var n,a;o.changedTouches?(n=o.changedTouches[0].pageX,a=o.changedTouches[0].pageY):(n=o.clientX,a=o.clientY),c.x=n/window.innerWidth*2-1,c.y=-a/window.innerHeight*2+1,r.setFromCamera(c,t);var h,l=r.intersectObjects([e],!0);0!=l.length&&(l[0]&&l[0].point&&(h=l[0].point,console.log(h,"当前位置"),i(h.x,h.y,h.z,s[0],s[1],s[2])))}function d(o){var n,i;n=o.clientX,i=o.clientY,c.x=n/window.innerWidth*2-1,c.y=-i/window.innerHeight*2+1,r.setFromCamera(c,t);var a=r.intersectObjects([e],!0);0==a.length?p(!0):p(!1,a[0].object.parent.name)}function b(i){var a,s;console.log(t.position,n.target,"数据"),i.changedTouches?(a=i.changedTouches[0].pageX,s=i.changedTouches[0].pageY):(a=i.clientX,s=i.clientY),c.x=a/window.innerWidth*2-1,c.y=-s/window.innerHeight*2+1,r.setFromCamera(c,t);var l=r.intersectObjects([e],!0);if(0!=l.length)if(""==l[0].object.name);else{h.pop(),h.push(l[0].object.parent),o.selectedObjects=h;var m=l[0].object.parent.parent.name;m.includes("smcyy_jmkl_f16_")?o.visibleEdgeColor.set("#e75f58"):o.visibleEdgeColor.set(parseInt("0x00FFFF"))}}function p(o,r){var c=e.getObjectByName("smcyy_jmkl");if(o){var h=c.children;e.getObjectByName("AGV小车").visible=!1,h.map((function(e){e.visible=!0})),i(a[0],a[1],a[2],s[0],s[1],s[2])}else{var l=c.children;r.includes("smcyy_jmkl_f16_")?e.getObjectByName("AGV小车").visible=!0:e.getObjectByName("AGV小车").visible=!1,l.map((function(e){e.name!==r&&(e.visible=!1)})),i(76.90097560862407,2001.4524009301272,-198.43114513307248,76.89897485376429,1.45240093113044,-198.4311454917692),console.log(t,"相机数据"),console.log(n,"控制器的数据")}}window.addEventListener("click",l),window.addEventListener("dblclick",d),window.addEventListener("mousemove",b),window.addEventListener("mouseup",u)}),P=function(e){for(var t=new Array,o=0;o<e.points.length;o++){var n=e.points[o];t.push(new m["Kb"](n.x,n.y,n.z))}var i=new m["l"](t,!1,"catmullrom",1e-9);return i},E=function(e,t){var o=e.getPoints(100),n=new m["h"];n.vertices=o;var i=new m["H"]({color:4491519}),a=new m["G"](n,i);return a.uuid=t.No,a.name=t.Name,a.type="Route",a},x=o("4086"),S=o("e642"),T=o("8710"),k=Object(h["a"])((function e(t){Object(c["a"])(this,e),Object(l["a"])(this,"Load",(function(e,t){var o=new x["a"];function n(o){var n=new S["a"];function i(o){o.scale.set(1,1,1),o.traverse((function(e){e instanceof m["U"]&&(e.geometry.applyMatrix((new m["T"]).makeRotationY(Math.PI/2)),e.material.transparent=!0)})),e[t](o)}n.setMaterials(o),n.load("/test_unity_webgl/three2/3DModels/CartoonMan008.obj",i)}o.load("/test_unity_webgl/three2/3DModels/CartoonMan008.mtl",n)})),Object(l["a"])(this,"LoadFBX",(function(e,t){var o=new T["a"];function n(o){o.scale.set(.2,.2,.2),o.traverse((function(e){e instanceof m["U"]&&(e.geometry.applyMatrix((new m["T"]).makeRotationY(Math.PI/2)),e.material.transparent=!0)})),e[t](o)}o.load("/test_unity_webgl/three2/3DModels/Standard Idle.fbx",n)})),t=t||{scale:.1},this.scale=t.scale})),z=k,C=function(){function e(){Object(c["a"])(this,e),Object(l["a"])(this,"initMain",(function(){this.initScene(),this.initCamera(),this.initRenderer(),this.initOrbitControl(),this.setCameraTarget(),this.initStats(),this.initBuilding(),this.initLight(),this.initoutLine(),this.initComposer(),this.initObjectSelect(),this.initAgvCar(),this.initReSize(this)})),Object(l["a"])(this,"initSub",(function(e,t){this.initScene(),this.initCameraSub(e),this.initRenderer(),this.initOrbitControl(),this.initLight(),"Store"==e?this.initSubStore(t):"StoreGroup"==e&&this.initSubGroup(t),this.initoutLine(),this.initComposer(),this.initObjectSelect()})),Object(l["a"])(this,"start",(function(){this.initMain(),this.animate()})),Object(l["a"])(this,"startSub",(function(){this.animateSub()})),Object(l["a"])(this,"initScene",(function(){this.scene=new m["vb"]})),Object(l["a"])(this,"initCameraSub",(function(e){this.camera=new m["jb"](60,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.z=800,"Store"==e?(this.camera.position.y=600,this.camera.position.x=200):"StoreGroup"==e&&(this.camera.position.y=100,this.camera.position.x=0),this.camera.lookAt(new m["Kb"](0,0,0)),this.scene.add(this.camera)})),Object(l["a"])(this,"initCamera",(function(){this.camera=new m["jb"](60,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.set(this.cameraPosition[0],this.cameraPosition[1],this.cameraPosition[2]),this.scene.add(this.camera)})),Object(l["a"])(this,"resetEyes",(function(){this.cameraMotion(this.cameraPosition[0],this.cameraPosition[1],this.cameraPosition[2],this.controlTarget[0],this.controlTarget[1],this.controlTarget[2])})),Object(l["a"])(this,"initRenderer",(function(){this.renderer=new m["Ob"]({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(3760283),this.renderer.setPixelRatio(window.devicePixelRatio);var e=document.getElementById("container");e.appendChild(this.renderer.domElement)})),Object(l["a"])(this,"initComposer",(function(){var e=new f["a"](this.scene,this.camera);this.composer=new g["a"](this.renderer),this.composer.addPass(e),this.composer.addPass(this.outlinePass)})),Object(l["a"])(this,"initoutLine",(function(){this.outlinePass=new p["a"](new m["Jb"](window.innerWidth,window.innerWidth),this.scene,this.camera),this.outlinePass.edgeStrength=2,this.outlinePass.edgeGlow=4,this.outlinePass.usePatternTexture=!1,this.outlinePass.edgeThickness=4,this.outlinePass.downSampleRatio=1,this.outlinePass.pulsePeriod=5,this.outlinePass.visibleEdgeColor.set(parseInt("0x00FFFF")),this.outlinePass.hiddenEdgeColor=new m["o"](0,0,0),this.outlinePass.renderToScreen=!0})),Object(l["a"])(this,"initObjectSelect",(function(){O(this.scene,this.camera,this.outlinePass,this.orbitControl,this.cameraMotion.bind(this),this.cameraPosition,this.controlTarget)})),Object(l["a"])(this,"initLight",(function(){var e=new m["b"](16777215,1);e.position.set(0,0,0),this.addObject(e);var t=new m["r"](16777215,.3);t.position.set(0,200,0),this.addObject(t);var o=new m["kb"](16777215,.3);o.position.set(-500,200,0),this.addObject(o);var n=new m["kb"](16777215,.3);n.position.set(500,200,0),this.addObject(n)})),Object(l["a"])(this,"initOrbitControl",(function(){this.orbitControl=new b(this.camera,this.renderer.domElement),this.orbitControl.enableDamping=!0,this.orbitControl.dampingFactor=.5,this.orbitControl.minDistance=0,this.orbitControl.maxDistance=2e3,this.orbitControl.maxPolarAngle=Math.PI/2.2,this.orbitControl.mouseButtons={LEFT:m["P"].ROTATE,MIDDLE:m["P"].DOLLY,RIGHT:m["P"].PAN}})),Object(l["a"])(this,"initStats",(function(){this.stats=new u["a"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.up="0px",document.body.appendChild(this.stats.domElement)})),Object(l["a"])(this,"initAxisHelper",(function(){var e=new m["d"](1e3);this.addObject(e)})),Object(l["a"])(this,"addObject",(function(e){this.scene.add(e),this.objects.push(e)})),Object(l["a"])(this,"moveAgvCar",(function(){if(this.curve&&this.AgvCar){this.time=this.time+1;var e=this.curve.getPoints(2e3),t=e[this.time],o=e[this.time+1];this.time>=2e3&&(this.time=0),t&&t.x&&(this.AgvCar.position.set(t.x,28,t.z),this.AgvCar.lookAt(o.x,28,o.z))}})),Object(l["a"])(this,"initBuilding",(function(){var e=this,t=new j;t.loadModel().then((function(t){t.position.set(0,0,0),t.scale.set(.2,.2,.2),t.name="smcyy_jmkl",console.log(t,"建筑模型"),e.scene.add(t)})),console.log(this.scene,"当前场景"),console.log(this.camera.position,"当前相机位置"),console.log(this.orbitControl.target,"当前控制器的朝向")})),Object(l["a"])(this,"initRouteData",(function(){for(var e=this.buildingObjects.objects,t=0;t<e.length;t++){var o=e[t];switch(o.objectType){case"route":this.curve=P(o),this.addObject(E(this.curve,o));break}}})),Object(l["a"])(this,"showAgvCar",(function(e){e.name="AGV小车",e.position.set(0,0,0),e.visible=!1,this.AgvCar=e,this.addObject(e)})),Object(l["a"])(this,"initAgvCar",(function(){var e=new z;e.LoadFBX(this,"showAgvCar")})),Object(l["a"])(this,"setCar",(function(e,t){var o=this.scene.getObjectByName("AGV小车");o.visible=e,o.position.x=t.x,o.position.y=t.y,o.position.z=t.z})),Object(l["a"])(this,"removeObject",(function(e){for(var t=0;t<this.objects.length;t++){var o=this.objects[t];o.name!=e&&o.id!=e||(this.objects.splice(t,1),this.scene.remove(o))}})),Object(l["a"])(this,"changeTemperatureShow",(function(){if(1==this.tmpIsShow){for(var e=0;e<this.objectLockPointer.length;e++){var t=this.objectLockPointer[e];"Temperature"==t.type?this.removeObject(t.id):"StoreSign"==t.type&&this.addObject(t)}this.tmpIsShow=0}else{for(var o=0;o<this.objectLockPointer.length;o++){var n=this.objectLockPointer[o];"Temperature"==n.type?this.addObject(n):"StoreSign"==n.type&&this.removeObject(n.id)}this.tmpIsShow=1}})),Object(l["a"])(this,"changeRoomRateShow",(function(){if(1==this.roomRateShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"StoreShelf"!=t.type&&"StoreGoods"!=t.type||this.scene.remove(t)}this.showRoomRate(),this.roomRateShow=0}else{for(var o=0;o<this.objects.length;o++){var n=this.objects[o];"StoreShelf"!=n.type&&"StoreGoods"!=n.type||this.scene.add(n)}for(var i=0;i<this.objectsRoomRate.length;i++){var a=this.objectsRoomRate[i];this.removeObject(a.id)}this.objectsRoomRate=[],this.roomRateShow=1}})),Object(l["a"])(this,"changeStoreShow",(function(){if(1==this.storeIsShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"Store"==t.type&&this.scene.remove(t)}this.storeIsShow=0}else{for(var o=0;o<this.objects.length;o++){var n=this.objects[o];"Store"==n.type&&this.scene.add(n)}this.storeIsShow=1}})),Object(l["a"])(this,"changeShelfShow",(function(){if(1==this.shelfIsShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"StoreShelf"==t.type&&this.scene.remove(t)}this.shelfIsShow=0}else{for(var o=0;o<this.objects.length;o++){var n=this.objects[o];"StoreShelf"==n.type&&this.scene.add(n)}this.shelfIsShow=1}})),Object(l["a"])(this,"changeBackGround",(function(){void 0==this.scene.getObjectByName("StarSky",!1)?this.addObject(this.skyBox):this.removeObject(this.skyBox.name)})),Object(l["a"])(this,"getExistedGoodType",(function(e){for(var t=0;t<this.goodTypes.length;t++){var o=this.goodTypes[t];if(o.type===e)return o.object}return null})),Object(l["a"])(this,"changeSpriteShow",(function(){if(1==this.spriteIsShow){for(var e=0;e<this.objectLockPointer.length;e++){var t=this.objectLockPointer[e];this.removeObject(t.id)}this.spriteIsShow=0}else{for(var o=0;o<this.objectLockPointer.length;o++){var n=this.objectLockPointer[o];this.addObject(n)}this.spriteIsShow=1}})),Object(l["a"])(this,"initPointLockControl",(function(e){this.lockcontrols=new v["a"](this.camera),this.raycaster=new m["tb"](new m["Kb"],new m["Kb"](0,-1,0),0,10);var t=function(t){switch(t.keyCode){case 38:case 87:e.moveForward=!0;break;case 37:case 65:e.moveLeft=!0;break;case 40:case 83:e.moveBackward=!0;break;case 39:case 68:e.moveRight=!0;break;case 32:!0===e.canJump&&(e.velocity.y+=350),e.canJump=!1;break}},o=function(t){switch(t.keyCode){case 38:case 87:e.moveForward=!1;break;case 37:case 65:e.moveLeft=!1;break;case 40:case 83:e.moveBackward=!1;break;case 39:case 68:e.moveRight=!1;break}};document.addEventListener("keydown",t,!1),document.addEventListener("keyup",o,!1)})),Object(l["a"])(this,"lockControl",(function(){1==this.spriteIsShow&&this.changeSpriteShow(),this.camera.position.y=100,this.camera.lookAt(0,100,0),this.lockcontrols.getObject().position.x=0,this.lockcontrols.getObject().position.y=100,this.lockcontrols.getObject().position.z=580,this.lockcontrols.lock()})),Object(l["a"])(this,"firstPersonMove",(function(){if(!0===this.lockcontrols.isLocked){this.raycaster.ray.origin.copy(this.lockcontrols.getObject().position),this.raycaster.ray.origin.y-=10;var e=this.raycaster.intersectObjects(this.objects),t=e.length>0,o=performance.now(),n=(o-this.prevTime)/1e3;this.velocity.x-=10*this.velocity.x*n,this.velocity.z-=10*this.velocity.z*n,this.velocity.y-=9.8*100*n,this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveLeft)-Number(this.moveRight),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=2e3*this.direction.z*n),(this.moveLeft||this.moveRight)&&(this.velocity.x-=2e3*this.direction.x*n),!0===t&&(this.velocity.y=Math.max(0,this.velocity.y),this.canJump=!0),this.lockcontrols.getObject().translateX(this.velocity.x*n),this.lockcontrols.getObject().position.y+=this.velocity.y*n,this.lockcontrols.getObject().translateZ(this.velocity.z*n),this.lockcontrols.getObject().position.y<100&&(this.velocity.y=0,this.lockcontrols.getObject().position.y=100,this.canJump=!0),this.prevTime=o}})),Object(l["a"])(this,"changeStats",(function(){"none"==this.stats.domElement.style.display?this.stats.domElement.style.display="block":this.stats.domElement.style.display="none"})),Object(l["a"])(this,"initReSize",(function(e){window.addEventListener("resize",(function(){e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight)}),!1)})),Object(l["a"])(this,"animate",(function(){requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update(),this.composer.render(),d["a"].update(),this.moveAgvCar()})),Object(l["a"])(this,"animateSub",(function(){requestAnimationFrame(this.animateSub.bind(this)),this.renderer.render(this.scene,this.camera),this.composer.render()})),this.scene=null,this.camera=null,this.renderer=null,this.objects=[],this.firstTime=1,this.time=0,this.roomRateShow=1,this.goodTypes=[],this.objectsRoomRate=[],this.velocity=new m["Kb"],this.direction=new m["Kb"],this.prevTime=performance.now(),this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.canJump=!1,this.objectLockPointer=[],this.spriteIsShow=1,this.storeIsShow=1,this.groupIsShow=1,this.shelfIsShow=1,this.skyBox=null,this.buildingObjects={objects:[{objName:"AGVRoute",objectType:"route",points:[{x:-87.77039193374166,y:28,z:-149.68967301478148},{x:-86.29625542778217,y:28,z:-147.37658737038709},{x:-84.72392809392323,y:28,z:-145.20440236296008},{x:-84.19328255270113,y:28,z:-144.00600041251545},{x:-85.68297814786274,y:28,z:-142.62387567157188},{x:-87.10967327557685,y:28,z:-144.4436401550513},{x:-88.3224285766881,y:28,z:-146.17127393590079},{x:-89.25420647753265,y:28,z:-147.15669569644288},{x:-90.56994450449761,y:28,z:-147.86549145299722},{x:-92.08329592007794,y:28,z:-146.54954990067264},{x:-93.32239227659437,y:28,z:-145.7743701640501},{x:-93.94092981053659,y:28,z:-145.13957498854137},{x:-94.54107854310807,y:28,z:-144.71196645549497},{x:-94.11666865802309,y:28,z:-144.0864202705672},{x:-93.24120204664192,y:28,z:-143.42528784121254},{x:-92.82511652429176,y:28,z:-142.63944189904123},{x:-92.73012600640793,y:28,z:-142.16064316787103},{x:-93.69826829041304,y:28,z:-141.40554811247003},{x:-94.28461366794534,y:28,z:-140.88020166672612},{x:-93.51589846439283,y:28,z:-139.58112633543183},{x:-92.25604687075987,y:28,z:-137.70880711649102},{x:-91.01935860840891,y:28,z:-136.0878275909687},{x:-92.4306159263767,y:28,z:-135.02978443001484},{x:-94.32924393850449,y:28,z:-133.77974406691243},{x:-95.41306191120177,y:28,z:-132.80428323625742},{x:-95.96300542026123,y:28,z:-132.43714835308035},{x:-98.16138567442687,y:28,z:-135.1662577353178},{x:-99.13055805675616,y:28,z:-136.6176112752607},{x:-100.18455766647499,y:28,z:-135.7351726676191},{x:-102.3283543858391,y:28,z:-134.12124150988643},{x:-100.2369579898838,y:28,z:-130.1078578563907},{x:-98.02482491584506,y:28,z:-128.49722011477448},{x:-96.25804199956815,y:28,z:-129.70321028765647},{x:-91.85047211197177,y:28,z:-134.21793975901087},{x:-89.63022184209623,y:28,z:-135.07078214496096},{x:-85.8992095983462,y:28,z:-137.03224419506736},{x:-85.40625278148313,y:28,z:-136.12072162141482},{x:-90.0602855186697,y:28,z:-132.9849305290307},{x:-92.2537037163749,y:28,z:-131.4232344630381}]}]},this.cameraPosition=[1022.3944494478264,84.56114248382055,-220.4317485785902],this.controlTarget=[444.8887420685298,1.4524009311303852,-245.13916364110926]}return Object(h["a"])(e,[{key:"setCameraTarget",value:function(){this.orbitControl.target.set(this.controlTarget[0],this.controlTarget[1],this.controlTarget[2])}},{key:"cameraMotion",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=new d["a"].Tween({x1:this.camera.position.x,y1:this.camera.position.y,z1:this.camera.position.z,x2:this.orbitControl.target.x,y2:this.orbitControl.target.y,z2:this.orbitControl.target.z});s.to({x1:e,y1:t,z1:o,x2:n,y2:i,z2:a},1e3);var r=this;s.onUpdate((function(e){r.camera.position.x=e.x1,r.camera.position.y=e.y1,r.camera.position.z=e.z1,r.orbitControl.target.x=e.x2,r.orbitControl.target.y=e.y2,r.orbitControl.target.z=e.z2,r.orbitControl.update()})),s.onComplete((function(){})),s.easing(d["a"].Easing.Exponential.InOut),s.start(),s.update()}}]),e}(),M=C,R=null,L={name:"Home",data:function(){return{list:["岛屿1","岛屿2","岛屿3","岛屿4"],currentIndex:null,room0cameraPosition:[67.71837465595135,1.4524190864826831,401.9605828165933],room0controlTarget:[67.71835315824529,1.4524009311303818,401.9604583867656],room1cameraPosition:[341.3187824529851,258.589532381425,29.96280443327055],room1controlTarget:[-134.67617024276637,1.4524009311304222,-189.90002092587525],room2cameraPosition:[679.483074222167,1.4524009311308381,-147.06661768887224],room2controlTarget:[679.483074222166,1.4524009311303852,-147.0666176888725],room3cameraPosition:[9.87853230093765,212.84370573178734,-500.05727486924764],room3controlTarget:[-338.33665224294924,1.4524009311303825,-519.3413577005416],room0Person:{x:35.396950189773655,y:-112.01401222885976,z:219.85335656254063},room1Person:{x:272.05169551814424,y:172.35301065548248,z:-22.821989980502224},room2Person:{x:530.5205816513906,y:-100.545571007452,z:-185.17160492442656},room3Person:{x:-45.64095606463366,y:142.84145836751168,z:-487.8489716493898}}},created:function(){},mounted:function(){this.mapInit()},methods:{mapInit:function(){R=new M,R.start()},chooseRoom:function(e){this.currentIndex=e,0===e&&(R.cameraMotion(this.room0cameraPosition[0],this.room0cameraPosition[1],this.room0cameraPosition[2],this.room0controlTarget[0],this.room0controlTarget[1],this.room0controlTarget[2]),R.setCar(!0,this.room0Person)),1===e&&(R.cameraMotion(this.room1cameraPosition[0],this.room1cameraPosition[1],this.room1cameraPosition[2],this.room1controlTarget[0],this.room1controlTarget[1],this.room1controlTarget[2]),R.setCar(!0,this.room1Person)),2===e&&(R.cameraMotion(this.room2cameraPosition[0],this.room2cameraPosition[1],this.room2cameraPosition[2],this.room2controlTarget[0],this.room2controlTarget[1],this.room2controlTarget[2]),R.setCar(!0,this.room2Person)),3===e&&(R.cameraMotion(this.room3cameraPosition[0],this.room3cameraPosition[1],this.room3cameraPosition[2],this.room3controlTarget[0],this.room3controlTarget[1],this.room3controlTarget[2]),R.setCar(!0,this.room3Person))},reset:function(){this.currentIndex=null,R.resetEyes(),R.setCar(!1,{x:0,y:0,z:0})}}},A=L,I=(o("d921"),o("2877")),N=Object(I["a"])(A,s,r,!1,null,"7d6d9667",null),F=N.exports,D={name:"App",components:{home:F}},H=D,Y=(o("034f"),Object(I["a"])(H,i,a,!1,null,null,null)),_=Y.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(_)}}).$mount("#app")},"85ec":function(e,t,o){},d921:function(e,t,o){"use strict";o("229f")}});
//# sourceMappingURL=app.e9890a2a.js.map