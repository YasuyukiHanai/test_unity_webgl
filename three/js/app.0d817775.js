(function(e){function t(t){for(var o,s,r=t[0],c=t[1],h=t[2],u=0,d=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,h||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var h=0;h<r.length;h++)t(r[h]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},4793:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("home")],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"threeMapDialog",attrs:{id:"container"}})])},r=[],c=n("d4ec"),h=n("bee2"),l=n("ade3"),u=(n("b0c0"),n("a434"),n("a9e3"),n("5a89")),d=n("ef20"),m=n("22b5"),b=(n("d3b7"),n("ddb0"),n("4c53"),function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new u["Eb"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:u["N"].LEFT,MIDDLE:u["N"].MIDDLE,RIGHT:u["N"].RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),r=s.NONE},this.update=function(){var t=new u["Eb"],i=(new u["kb"]).setFromUnitVectors(e.up,new u["Eb"](0,1,0)),a=i.clone().inverse(),p=new u["Eb"],f=new u["kb"];return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(i),h.setFromVector3(t),n.autoRotate&&r===s.NONE&&C(R()),h.theta+=l.theta,h.phi+=l.phi,h.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),n.target.add(m),t.setFromSpherical(h),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,m.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),m.set(0,0,0)),d=1,!!(b||p.distanceToSquared(n.object.position)>c||8*(1-f.dot(n.object.quaternion))>c)&&(n.dispatchEvent(o),p.copy(n.object.position),f.copy(n.object.quaternion),b=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",ue,!1),n.domElement.removeEventListener("mousedown",oe,!1),n.domElement.removeEventListener("wheel",se,!1),n.domElement.removeEventListener("touchstart",ce,!1),n.domElement.removeEventListener("touchend",le,!1),n.domElement.removeEventListener("touchmove",he,!1),document.removeEventListener("mousemove",ie,!1),document.removeEventListener("mouseup",ae,!1),window.removeEventListener("keydown",re,!1)};var n=this,o={type:"change"},i={type:"start"},a={type:"end"},s={NONE:0,ROTATE_UP:1,ROTATE_LEFT:2,ROTATE:3,DOLLY:4,DOLLY_ROTATE:7,PAN:8,DOLLY_PAN:12},r=s.NONE,c=1e-6,h=new u["wb"],l=new u["wb"],d=1,m=new u["Eb"],b=!1,p=new u["Db"],f=new u["Db"],v=new u["Db"],g=new u["Db"],y=new u["Db"],w=new u["Db"],j=new u["Db"],E=new u["Db"],O=new u["Db"],x=new u["Db"],S=new u["Db"],P=new u["Db"],k=new u["Db"],T=new u["Db"];function R(){return 2*Math.PI/60/60*n.autoRotateSpeed}function z(){return Math.pow(.95,n.zoomSpeed)}function C(e){l.theta-=e}function M(e){l.phi-=e}var L=function(){var e=new u["Eb"];return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),m.add(e)}}(),A=function(){var e=new u["Eb"];return function(t,o){!0===n.screenSpacePanning?e.setFromMatrixColumn(o,1):(e.setFromMatrixColumn(o,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),m.add(e)}}(),D=function(){var e=new u["Eb"];return function(t,o){var i=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),L(2*t*s/i.clientHeight,n.object.matrix),A(2*o*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),A(o*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: MapControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function N(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function F(e){p.set(e.clientX,e.clientY)}function H(e){P.set(e.clientX,e.clientY)}function Y(e){O.set(e.clientX,e.clientY)}function _(e){v.set(e.clientX,e.clientY),y.subVectors(v,p).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;C(2*Math.PI*y.x/t.clientHeight),M(2*Math.PI*y.y/t.clientHeight),p.copy(v),n.update()}function B(e){k.set(e.clientX,e.clientY),T.subVectors(k,P),T.y>0?N(z()):T.y<0&&I(z()),P.copy(k),n.update()}function G(e){x.set(e.clientX,e.clientY),S.subVectors(x,O).multiplyScalar(n.panSpeed),D(S.x,S.y),O.copy(x),n.update()}function Z(e){}function X(e){e.deltaY<0?I(z()):e.deltaY>0&&N(z()),n.update()}function U(e){switch(e.keyCode){case n.keys.UP:D(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:D(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:D(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:D(-n.keyPanSpeed,0),n.update();break}}function V(e){p.set(e.touches[0].pageX,e.touches[0].pageY),f.set(e.touches[1].pageX,e.touches[1].pageY)}function W(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+o*o);P.set(0,i)}}function K(e){n.enablePan&&O.set(e.touches[0].pageX,e.touches[0].pageY)}function q(e){if(!1!==n.enableRotate&&0!==(r&s.ROTATE)){if(v.set(e.touches[0].pageX,e.touches[0].pageY),g.set(e.touches[1].pageX,e.touches[1].pageY),y.subVectors(v,p),w.subVectors(g,f),j.subVectors(f,p),E.subVectors(g,v),J()){var t=n.domElement===document?n.domElement.body:n.domElement;M(2*Math.PI*y.y/t.clientHeight),r=s.ROTATE_UP}else 0!==(r&s.ROTATE_LEFT)&&C((j.angle()-E.angle())*n.rotateSpeed);p.copy(v),f.copy(g)}}function J(){return!!Q(j)&&(!!Q(E)&&(!!$(y)&&(!!$(w)&&y.dot(w)>0)))}var Q=function(){var e=Math.sin(Math.PI/6);return function(t){return Math.abs(Math.sin(t.angle()))<e}}(),$=function(){var e=Math.cos(Math.PI/2-Math.PI/6);return function(t){return Math.abs(Math.cos(t.angle()))<e}}();function ee(e){if(!1!==n.enableZoom&&0!==(r&s.DOLLY)){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+o*o);k.set(0,i),T.set(0,Math.pow(k.y/P.y,n.zoomSpeed)),N(T.y),P.copy(k)}}function te(e){!1!==n.enablePan&&0!==(r&s.PAN)&&(x.set(e.touches[0].pageX,e.touches[0].pageY),S.subVectors(x,O).multiplyScalar(n.panSpeed),D(S.x,S.y),O.copy(x))}function ne(e){}function oe(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;F(e),r=s.ROTATE}else{if(!1===n.enablePan)return;Y(e),r=s.PAN}break;case n.mouseButtons.MIDDLE:if(!1===n.enableZoom)return;H(e),r=s.DOLLY;break;case n.mouseButtons.RIGHT:if(!1===n.enableRotate)return;F(e),r=s.ROTATE;break}r!==s.NONE&&(document.addEventListener("mousemove",ie,!1),document.addEventListener("mouseup",ae,!1),n.dispatchEvent(i))}}function ie(e){if(!1!==n.enabled)switch(e.preventDefault(),r){case s.ROTATE:if(!1===n.enableRotate)return;_(e);break;case s.DOLLY:if(!1===n.enableZoom)return;B(e);break;case s.PAN:if(!1===n.enablePan)return;G(e);break}}function ae(e){!1!==n.enabled&&(Z(e),document.removeEventListener("mousemove",ie,!1),document.removeEventListener("mouseup",ae,!1),n.dispatchEvent(a),r=s.NONE)}function se(e){!1===n.enabled||!1===n.enableZoom||r!==s.NONE&&r!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),X(e),n.dispatchEvent(a))}function re(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&U(e)}function ce(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enablePan)return;K(e),r=s.PAN;break;case 2:if(!1===n.enableZoom&&!1===n.enableRotate)return;V(e),W(e),r=s.DOLLY_ROTATE;break;default:r=s.NONE}r!==s.NONE&&n.dispatchEvent(i)}}function he(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enablePan)return;if(r!==s.PAN)return;te(e),n.update();break;case 2:if(!1===n.enableZoom&&!1===n.enableRotate)return;if(0===(r&s.DOLLY_ROTATE))return;q(e),ee(e),n.update();break;default:r=s.NONE}}function le(e){!1!==n.enabled&&(ne(e),n.dispatchEvent(a),r=s.NONE)}function ue(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",ue,!1),n.domElement.addEventListener("mousedown",oe,!1),n.domElement.addEventListener("wheel",se,!1),n.domElement.addEventListener("touchstart",ce,!1),n.domElement.addEventListener("touchend",le,!1),n.domElement.addEventListener("touchmove",he,!1),window.addEventListener("keydown",re,!1),this.update()});b.prototype=Object.create(u["t"].prototype),b.prototype.constructor=b,Object.defineProperties(b.prototype,{center:{get:function(){return console.warn("THREE.MapControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.MapControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.MapControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.MapControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.MapControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var p=n("4e15"),f=n("93e9"),v=n("32d9"),g=n("b317"),y=(n("d81d"),n("34ad")),w=function(){function e(t){Object(c["a"])(this,e),this.APP=t,this.gltfLoader=new y["a"],this.gltfGroup=new u["x"],this.gltfGroup.name="glbGroup",this.nameList=[],this.position={}}return Object(h["a"])(e,[{key:"loadModel",value:function(){var e=this;return new Promise((function(t){var n="/3DModels/111.glb";e.gltfLoader.load(n,(function(n){var o=n.scene;e.setCastShadow(o),e.setReceiveShadow(o),t(o.children[0])}))}))}},{key:"setCastShadow",value:function(e){var t=function e(t){t.castShadow=!0,t.children.length>0&&t.children.map((function(t){e(t)}))};t(e)}},{key:"setReceiveShadow",value:function(e){var t=function e(t){t.receiveShadow=!0,t.material&&(t.material.side=u["r"],t.material.shadowSide=u["e"]),t.children.length>0&&t.children.map((function(t){e(t)}))};t(e)}}]),e}(),j=w,E=(n("caad"),n("2532"),function(e,t,n,o,i,a,s){var r=new u["pb"],c=new u["Db"],h=[];function l(n){var o,i;n.changedTouches?(o=n.changedTouches[0].pageX,i=n.changedTouches[0].pageY):(o=n.clientX,i=n.clientY),c.x=o/window.innerWidth*2-1,c.y=-i/window.innerHeight*2+1,r.setFromCamera(c,t);var a,s=r.intersectObjects([e],!0);0!=s.length&&(s[0]&&s[0].point&&(a=s[0].point,console.log(a,"当前位置")))}function d(n){var o,i;o=n.clientX,i=n.clientY,c.x=o/window.innerWidth*2-1,c.y=-i/window.innerHeight*2+1,r.setFromCamera(c,t);var a=r.intersectObjects([e],!0);0==a.length?b(!0):b(!1,a[0].object.parent.name)}function m(i){var a,s;console.log(t.position,o.target,"数据"),i.changedTouches?(a=i.changedTouches[0].pageX,s=i.changedTouches[0].pageY):(a=i.clientX,s=i.clientY),c.x=a/window.innerWidth*2-1,c.y=-s/window.innerHeight*2+1,r.setFromCamera(c,t);var l=r.intersectObjects([e],!0);if(0!=l.length)if(""==l[0].object.name);else{h.pop(),h.push(l[0].object.parent),n.selectedObjects=h;var u=l[0].object.parent.parent.name;u.includes("smcyy_jmkl_f16_")?n.visibleEdgeColor.set("#e75f58"):n.visibleEdgeColor.set(parseInt("0x00FFFF"))}}function b(n,r){var c=e.getObjectByName("smcyy_jmkl");if(n){var h=c.children;e.getObjectByName("AGV小车").visible=!1,h.map((function(e){e.visible=!0})),i(a[0],a[1],a[2],s[0],s[1],s[2])}else{var l=c.children;r.includes("smcyy_jmkl_f16_")?e.getObjectByName("AGV小车").visible=!0:e.getObjectByName("AGV小车").visible=!1,l.map((function(e){e.name!==r&&(e.visible=!1)})),i(76.90097560862407,2001.4524009301272,-198.43114513307248,76.89897485376429,1.45240093113044,-198.4311454917692),console.log(t,"相机数据"),console.log(o,"控制器的数据")}}window.addEventListener("click",l),window.addEventListener("dblclick",d),window.addEventListener("mousemove",m)}),O=function(e){for(var t=new Array,n=0;n<e.points.length;n++){var o=e.points[n];t.push(new u["Eb"](o.x,o.y,o.z))}var i=new u["l"](t,!1,"catmullrom",1e-9);return i},x=function(e,t){var n=e.getPoints(100),o=new u["h"];o.vertices=n;var i=new u["F"]({color:4491519}),a=new u["E"](o,i);return a.uuid=t.No,a.name=t.Name,a.type="Route",a},S=n("4086"),P=n("e642"),k=Object(h["a"])((function e(t){Object(c["a"])(this,e),Object(l["a"])(this,"Load",(function(e,t){var n=new S["a"];function o(n){var o=new P["a"];function i(n){n.scale.set(.02,.02,.02),n.traverse((function(e){e instanceof u["R"]&&(e.geometry.applyMatrix((new u["Q"]).makeRotationY(Math.PI/2)),e.material.transparent=!0)})),e[t](n)}o.setMaterials(n),o.load("/3DModels/CartoonMan008.obj",i)}n.load("/3DModels/CartoonMan008.mtl",o)})),t=t||{scale:.1},this.scale=t.scale})),T=k,R=function(){function e(){Object(c["a"])(this,e),Object(l["a"])(this,"initMain",(function(){this.initScene(),this.initCamera(),this.initRenderer(),this.initOrbitControl(),this.setCameraTarget(),this.initStats(),this.initBuilding(),this.initLight(),this.initoutLine(),this.initComposer(),this.initObjectSelect(),this.initAgvCar(),this.initReSize(this),this.initRouteData()})),Object(l["a"])(this,"initSub",(function(e,t){this.initScene(),this.initCameraSub(e),this.initRenderer(),this.initOrbitControl(),this.initLight(),"Store"==e?this.initSubStore(t):"StoreGroup"==e&&this.initSubGroup(t),this.initoutLine(),this.initComposer(),this.initObjectSelect()})),Object(l["a"])(this,"start",(function(){this.initMain(),this.animate()})),Object(l["a"])(this,"startSub",(function(){this.animateSub()})),Object(l["a"])(this,"initScene",(function(){this.scene=new u["rb"]})),Object(l["a"])(this,"initCameraSub",(function(e){this.camera=new u["fb"](60,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.z=800,"Store"==e?(this.camera.position.y=600,this.camera.position.x=200):"StoreGroup"==e&&(this.camera.position.y=100,this.camera.position.x=0),this.camera.lookAt(new u["Eb"](0,0,0)),this.scene.add(this.camera)})),Object(l["a"])(this,"initCamera",(function(){this.camera=new u["fb"](60,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.set(this.cameraPosition[0],this.cameraPosition[1],this.cameraPosition[2]),this.scene.add(this.camera)})),Object(l["a"])(this,"initRenderer",(function(){this.renderer=new u["Hb"]({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(3760283),this.renderer.setPixelRatio(window.devicePixelRatio);var e=document.getElementById("container");e.appendChild(this.renderer.domElement)})),Object(l["a"])(this,"initComposer",(function(){var e=new f["a"](this.scene,this.camera);this.composer=new v["a"](this.renderer),this.composer.addPass(e),this.composer.addPass(this.outlinePass)})),Object(l["a"])(this,"initoutLine",(function(){this.outlinePass=new p["a"](new u["Db"](window.innerWidth,window.innerWidth),this.scene,this.camera),this.outlinePass.edgeStrength=2,this.outlinePass.edgeGlow=4,this.outlinePass.usePatternTexture=!1,this.outlinePass.edgeThickness=4,this.outlinePass.downSampleRatio=1,this.outlinePass.pulsePeriod=5,this.outlinePass.visibleEdgeColor.set(parseInt("0x00FFFF")),this.outlinePass.hiddenEdgeColor=new u["o"](0,0,0),this.outlinePass.renderToScreen=!0})),Object(l["a"])(this,"initObjectSelect",(function(){E(this.scene,this.camera,this.outlinePass,this.orbitControl,this.cameraMotion.bind(this),this.cameraPosition,this.controlTarget)})),Object(l["a"])(this,"initLight",(function(){var e=new u["b"](16777215,1);e.position.set(0,0,0),this.addObject(e);var t=new u["q"](16777215,.3);t.position.set(0,200,0),this.addObject(t);var n=new u["gb"](16777215,.3);n.position.set(-500,200,0),this.addObject(n);var o=new u["gb"](16777215,.3);o.position.set(500,200,0),this.addObject(o)})),Object(l["a"])(this,"initOrbitControl",(function(){this.orbitControl=new b(this.camera,this.renderer.domElement),this.orbitControl.enableDamping=!0,this.orbitControl.dampingFactor=.5,this.orbitControl.minDistance=0,this.orbitControl.maxDistance=2e3,this.orbitControl.maxPolarAngle=Math.PI/2.2,this.orbitControl.mouseButtons={LEFT:u["N"].ROTATE,MIDDLE:u["N"].DOLLY,RIGHT:u["N"].PAN}})),Object(l["a"])(this,"initStats",(function(){this.stats=new d["a"],this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.up="0px",document.body.appendChild(this.stats.domElement)})),Object(l["a"])(this,"initAxisHelper",(function(){var e=new u["d"](1e3);this.addObject(e)})),Object(l["a"])(this,"addObject",(function(e){this.scene.add(e),this.objects.push(e)})),Object(l["a"])(this,"moveAgvCar",(function(){if(this.curve&&this.AgvCar){this.time=this.time+1;var e=this.curve.getPoints(2e3),t=e[this.time],n=e[this.time+1];this.time>=2e3&&(this.time=0),t&&t.x&&(this.AgvCar.position.set(t.x,28,t.z),this.AgvCar.lookAt(n.x,28,n.z))}})),Object(l["a"])(this,"initBuilding",(function(){var e=this,t=new j;t.loadModel().then((function(t){t.position.set(0,0,0),t.scale.set(.2,.2,.2),t.name="smcyy_jmkl",console.log(t,"建筑模型"),e.scene.add(t)})),console.log(this.scene,"当前场景"),console.log(this.camera.position,"当前相机位置"),console.log(this.orbitControl.target,"当前控制器的朝向")})),Object(l["a"])(this,"initRouteData",(function(){for(var e=this.buildingObjects.objects,t=0;t<e.length;t++){var n=e[t];switch(n.objectType){case"route":this.curve=O(n),this.addObject(x(this.curve,n));break}}})),Object(l["a"])(this,"showAgvCar",(function(e){e.name="AGV小车",e.position.set(0,0,0),e.visible=!1,this.AgvCar=e,this.addObject(e)})),Object(l["a"])(this,"initAgvCar",(function(){var e=new T;e.Load(this,"showAgvCar")})),Object(l["a"])(this,"removeObject",(function(e){for(var t=0;t<this.objects.length;t++){var n=this.objects[t];n.name!=e&&n.id!=e||(this.objects.splice(t,1),this.scene.remove(n))}})),Object(l["a"])(this,"changeTemperatureShow",(function(){if(1==this.tmpIsShow){for(var e=0;e<this.objectLockPointer.length;e++){var t=this.objectLockPointer[e];"Temperature"==t.type?this.removeObject(t.id):"StoreSign"==t.type&&this.addObject(t)}this.tmpIsShow=0}else{for(var n=0;n<this.objectLockPointer.length;n++){var o=this.objectLockPointer[n];"Temperature"==o.type?this.addObject(o):"StoreSign"==o.type&&this.removeObject(o.id)}this.tmpIsShow=1}})),Object(l["a"])(this,"changeRoomRateShow",(function(){if(1==this.roomRateShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"StoreShelf"!=t.type&&"StoreGoods"!=t.type||this.scene.remove(t)}this.showRoomRate(),this.roomRateShow=0}else{for(var n=0;n<this.objects.length;n++){var o=this.objects[n];"StoreShelf"!=o.type&&"StoreGoods"!=o.type||this.scene.add(o)}for(var i=0;i<this.objectsRoomRate.length;i++){var a=this.objectsRoomRate[i];this.removeObject(a.id)}this.objectsRoomRate=[],this.roomRateShow=1}})),Object(l["a"])(this,"changeStoreShow",(function(){if(1==this.storeIsShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"Store"==t.type&&this.scene.remove(t)}this.storeIsShow=0}else{for(var n=0;n<this.objects.length;n++){var o=this.objects[n];"Store"==o.type&&this.scene.add(o)}this.storeIsShow=1}})),Object(l["a"])(this,"changeShelfShow",(function(){if(1==this.shelfIsShow){for(var e=0;e<this.objects.length;e++){var t=this.objects[e];"StoreShelf"==t.type&&this.scene.remove(t)}this.shelfIsShow=0}else{for(var n=0;n<this.objects.length;n++){var o=this.objects[n];"StoreShelf"==o.type&&this.scene.add(o)}this.shelfIsShow=1}})),Object(l["a"])(this,"changeBackGround",(function(){void 0==this.scene.getObjectByName("StarSky",!1)?this.addObject(this.skyBox):this.removeObject(this.skyBox.name)})),Object(l["a"])(this,"getExistedGoodType",(function(e){for(var t=0;t<this.goodTypes.length;t++){var n=this.goodTypes[t];if(n.type===e)return n.object}return null})),Object(l["a"])(this,"changeSpriteShow",(function(){if(1==this.spriteIsShow){for(var e=0;e<this.objectLockPointer.length;e++){var t=this.objectLockPointer[e];this.removeObject(t.id)}this.spriteIsShow=0}else{for(var n=0;n<this.objectLockPointer.length;n++){var o=this.objectLockPointer[n];this.addObject(o)}this.spriteIsShow=1}})),Object(l["a"])(this,"initPointLockControl",(function(e){this.lockcontrols=new g["a"](this.camera),this.raycaster=new u["pb"](new u["Eb"],new u["Eb"](0,-1,0),0,10);var t=function(t){switch(t.keyCode){case 38:case 87:e.moveForward=!0;break;case 37:case 65:e.moveLeft=!0;break;case 40:case 83:e.moveBackward=!0;break;case 39:case 68:e.moveRight=!0;break;case 32:!0===e.canJump&&(e.velocity.y+=350),e.canJump=!1;break}},n=function(t){switch(t.keyCode){case 38:case 87:e.moveForward=!1;break;case 37:case 65:e.moveLeft=!1;break;case 40:case 83:e.moveBackward=!1;break;case 39:case 68:e.moveRight=!1;break}};document.addEventListener("keydown",t,!1),document.addEventListener("keyup",n,!1)})),Object(l["a"])(this,"lockControl",(function(){1==this.spriteIsShow&&this.changeSpriteShow(),this.camera.position.y=100,this.camera.lookAt(0,100,0),this.lockcontrols.getObject().position.x=0,this.lockcontrols.getObject().position.y=100,this.lockcontrols.getObject().position.z=580,this.lockcontrols.lock()})),Object(l["a"])(this,"firstPersonMove",(function(){if(!0===this.lockcontrols.isLocked){this.raycaster.ray.origin.copy(this.lockcontrols.getObject().position),this.raycaster.ray.origin.y-=10;var e=this.raycaster.intersectObjects(this.objects),t=e.length>0,n=performance.now(),o=(n-this.prevTime)/1e3;this.velocity.x-=10*this.velocity.x*o,this.velocity.z-=10*this.velocity.z*o,this.velocity.y-=9.8*100*o,this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveLeft)-Number(this.moveRight),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=2e3*this.direction.z*o),(this.moveLeft||this.moveRight)&&(this.velocity.x-=2e3*this.direction.x*o),!0===t&&(this.velocity.y=Math.max(0,this.velocity.y),this.canJump=!0),this.lockcontrols.getObject().translateX(this.velocity.x*o),this.lockcontrols.getObject().position.y+=this.velocity.y*o,this.lockcontrols.getObject().translateZ(this.velocity.z*o),this.lockcontrols.getObject().position.y<100&&(this.velocity.y=0,this.lockcontrols.getObject().position.y=100,this.canJump=!0),this.prevTime=n}})),Object(l["a"])(this,"changeStats",(function(){"none"==this.stats.domElement.style.display?this.stats.domElement.style.display="block":this.stats.domElement.style.display="none"})),Object(l["a"])(this,"initReSize",(function(e){window.addEventListener("resize",(function(){e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight)}),!1)})),Object(l["a"])(this,"animate",(function(){requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.stats.update(),this.composer.render(),m["a"].update(),this.moveAgvCar()})),Object(l["a"])(this,"animateSub",(function(){requestAnimationFrame(this.animateSub.bind(this)),this.renderer.render(this.scene,this.camera),this.composer.render()})),this.scene=null,this.camera=null,this.renderer=null,this.objects=[],this.firstTime=1,this.time=0,this.roomRateShow=1,this.goodTypes=[],this.objectsRoomRate=[],this.velocity=new u["Eb"],this.direction=new u["Eb"],this.prevTime=performance.now(),this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.canJump=!1,this.objectLockPointer=[],this.spriteIsShow=1,this.storeIsShow=1,this.groupIsShow=1,this.shelfIsShow=1,this.skyBox=null,this.buildingObjects={objects:[{objName:"AGVRoute",objectType:"route",points:[{x:-87.77039193374166,y:28,z:-149.68967301478148},{x:-86.29625542778217,y:28,z:-147.37658737038709},{x:-84.72392809392323,y:28,z:-145.20440236296008},{x:-84.19328255270113,y:28,z:-144.00600041251545},{x:-85.68297814786274,y:28,z:-142.62387567157188},{x:-87.10967327557685,y:28,z:-144.4436401550513},{x:-88.3224285766881,y:28,z:-146.17127393590079},{x:-89.25420647753265,y:28,z:-147.15669569644288},{x:-90.56994450449761,y:28,z:-147.86549145299722},{x:-92.08329592007794,y:28,z:-146.54954990067264},{x:-93.32239227659437,y:28,z:-145.7743701640501},{x:-93.94092981053659,y:28,z:-145.13957498854137},{x:-94.54107854310807,y:28,z:-144.71196645549497},{x:-94.11666865802309,y:28,z:-144.0864202705672},{x:-93.24120204664192,y:28,z:-143.42528784121254},{x:-92.82511652429176,y:28,z:-142.63944189904123},{x:-92.73012600640793,y:28,z:-142.16064316787103},{x:-93.69826829041304,y:28,z:-141.40554811247003},{x:-94.28461366794534,y:28,z:-140.88020166672612},{x:-93.51589846439283,y:28,z:-139.58112633543183},{x:-92.25604687075987,y:28,z:-137.70880711649102},{x:-91.01935860840891,y:28,z:-136.0878275909687},{x:-92.4306159263767,y:28,z:-135.02978443001484},{x:-94.32924393850449,y:28,z:-133.77974406691243},{x:-95.41306191120177,y:28,z:-132.80428323625742},{x:-95.96300542026123,y:28,z:-132.43714835308035},{x:-98.16138567442687,y:28,z:-135.1662577353178},{x:-99.13055805675616,y:28,z:-136.6176112752607},{x:-100.18455766647499,y:28,z:-135.7351726676191},{x:-102.3283543858391,y:28,z:-134.12124150988643},{x:-100.2369579898838,y:28,z:-130.1078578563907},{x:-98.02482491584506,y:28,z:-128.49722011477448},{x:-96.25804199956815,y:28,z:-129.70321028765647},{x:-91.85047211197177,y:28,z:-134.21793975901087},{x:-89.63022184209623,y:28,z:-135.07078214496096},{x:-85.8992095983462,y:28,z:-137.03224419506736},{x:-85.40625278148313,y:28,z:-136.12072162141482},{x:-90.0602855186697,y:28,z:-132.9849305290307},{x:-92.2537037163749,y:28,z:-131.4232344630381}]}]},this.cameraPosition=[1945.2644090703063,286.08207747770075,12.439935742174129],this.controlTarget=[-32.569205351049234,1.4524009311303858,-72.17768000030635]}return Object(h["a"])(e,[{key:"setCameraTarget",value:function(){this.orbitControl.target.set(this.controlTarget[0],this.controlTarget[1],this.controlTarget[2])}},{key:"cameraMotion",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=new m["a"].Tween({x1:this.camera.position.x,y1:this.camera.position.y,z1:this.camera.position.z,x2:this.orbitControl.target.x,y2:this.orbitControl.target.y,z2:this.orbitControl.target.z});s.to({x1:e,y1:t,z1:n,x2:o,y2:i,z2:a},1e3);var r=this;s.onUpdate((function(e){r.camera.position.x=e.x1,r.camera.position.y=e.y1,r.camera.position.z=e.z1,r.orbitControl.target.x=e.x2,r.orbitControl.target.y=e.y2,r.orbitControl.target.z=e.z2,r.orbitControl.update()})),s.onComplete((function(){})),s.easing(m["a"].Easing.Exponential.InOut),s.start(),s.update()}}]),e}(),z=R,C=null,M={name:"Home",created:function(){},mounted:function(){this.mapInit()},methods:{mapInit:function(){C=new z,C.start()},setCamera:function(){}}},L=M,A=(n("c687"),n("2877")),D=Object(A["a"])(L,s,r,!1,null,"2ae82705",null),N=D.exports,I={name:"App",components:{home:N}},F=I,H=(n("034f"),Object(A["a"])(F,i,a,!1,null,null,null)),Y=H.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(Y)}}).$mount("#app")},"85ec":function(e,t,n){},c687:function(e,t,n){"use strict";n("4793")}});
//# sourceMappingURL=app.0d817775.js.map